!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.BaaS=t():e.BaaS=t()}(window,(function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=128)}([function(e,t,r){(function(t){var n=t.BaaS||{};n._config=r(26),n._polyfill=r(27),n.use=function(e){return e(n)},e.exports=n}).call(this,r(15))},function(e,t,r){function n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){o(e,t,r[t])}))}return e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var a=r(7),u=r(2),c=r(0),l=r(3),f=r(29),_=r(11);Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,t){if(null==this)throw new TypeError('"this" is null or not defined');var r=Object(this),n=r.length>>>0;if(0===n)return!1;var o,i,s=0|t,a=Math.max(s>=0?s:n-Math.abs(s),0);for(;a<n;){if((o=r[a])===(i=e)||"number"==typeof o&&"number"==typeof i&&isNaN(o)&&isNaN(i))return!0;a++}return!1}});var p=function(e,t){t=t||{};var r=function(r){var n=new RegExp("(&?)"+r+"=:"+r,"g"),o=encodeURIComponent(t[r]);e="undefined"!==o?e.replace(n,(function(e,t){return t+r+"="+o})):e.replace(n,"");var i=new RegExp(":"+r,"g");e=e.replace(i,encodeURIComponent(t[r]))};for(var n in t)r(n);return e.replace(/([^:])\/\//g,(function(e,t){return t+"/"}))},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=c._config.REQUEST_PARAMS_MAP,r=s({},e);return Object.keys(e).map((function(n){Object.keys(t).map((function(o){if(n.startsWith(o)){var i=n.replace(o,t[o]);delete r[n],r[i]=e[n]}}))})),r},d=function(e){var t="";return 404===e.statusCode?t="not found":e.data.error_msg?t=e.data.error_msg:e.data.message&&(t=e.data.message),t},y=function(e){return"[object Array]"===Object.prototype.toString.call(e)},v=function e(t){if(null==t)return Object.create(null);var r=y(t)?[]:Object.create(Object.getPrototypeOf(t));for(var n in t)t.hasOwnProperty(n)&&(t[n]&&"object"===i(t[n])?(r[n]=y(t[n])?[]:{},r[n]=e(t[n])):r[n]=t[n]);return r};var g=function(e,t){return e.replace(/:(\w*)/g,(function(e,r){void 0!==t[r]&&delete t[r]})),t},b=function(e){return Math.floor(Date.now()/1e3)+e-30};e.exports={mergeRequestHeader:function(e){var t={"X-Hydrogen-Client-ID":c._config.CLIENT_ID,"X-Hydrogen-Client-Version":c._config.VERSION,"X-Hydrogen-Client-Platform":c._polyfill.CLIENT_PLATFORM,"X-Hydrogen-Client-SDK-Type":c._polyfill.SDK_TYPE};return c._config.ENV&&(e["X-Hydrogen-Env-ID"]=c._config.ENV),c.getAuthToken().then((function(r){return r&&(t.Authorization=c._config.AUTH_PREFIX+" "+r),s({},e||{},t)}))},log:_.log,setLogLevel:_.setLogLevel,format:p,getSysPlatform:function(){var e="UNKNOWN";try{e=c._polyfill.getSystemInfoSync().platform}catch(e){}return e},getFileNameFromPath:function(e){var t=e.lastIndexOf("/");return e.slice(t+1)},parseRegExp:function(e){var t=[],r=e.toString(),n=r.lastIndexOf("/");return t.push(r.substring(1,n)),n!==r.length-1&&t.push(r.substring(n+1)),t},replaceQueryParams:h,extractErrorMsg:d,isArray:y,isString:function(e){return"[object String]"===Object.prototype.toString.call(e)},isObject:function(e){var t=i(e);return null!=e&&"object"==t},isFunction:function(e){var t=i(e);return null!=e&&"function"==t},cloneDeep:v,isSessionExpired:function(){return a.get(u.STORAGE_KEY.EXPIRES_AT).then((function(e){return Date.now()/1e3>=(e||0)}))},excludeParams:g,doCreateRequestMethod:function(e){for(var t in e)e.hasOwnProperty(t)&&(c[t]=function(t){var r=e[t];return function(e){var t=v(e),n=r.method||"GET";r.defaultParams&&(t=s(v(r.defaultParams),t));var o=p(r.url,t),i={};return t.data?i=t.data:(i=g(r.url,t),i=h(i)),c._baasRequest({url:o,method:n,data:i})}}(t))},validateStatusCode:function(e){var t=parseInt(e.status||e.statusCode);if(t>=200&&t<300)return e;throw new l(t,d(e))},rateLimit:function(e){var t=null;return function(){return t||(t=e.apply(this,arguments).then((function(e){return t=null,e}),(function(e){throw t=null,e}))),t}},fnUnsupportedHandler:function(){throw new l(611)},compareVersion:function(e,t){try{if("string"!=typeof e||"string"!=typeof t)return 0;e=e.replace(/^[^0-9]/,""),t=t.replace(/^[^0-9]/,"");for(var r=e.split("."),n=t.split("."),o=Math.max(r.length,n.length),i=0;i<o;i++){var s=r[i]?parseInt(r[i]):0,a=n[i]?parseInt(n[i]):0;if(s>a)return 1;if(s<a)return-1}return 0}catch(e){return 0}},makeReportTicketParam:function(e){if(!e)throw new l(605);var t={submission_type:"form_id"};return t.submission_value=e,t},extend:function(){return s.apply(void 0,arguments)},getUpdateUserProfileParam:function(e){var t;return Object.keys(u.UPDATE_USERPROFILE_VALUE).forEach((function(r){e===u.UPDATE_USERPROFILE_VALUE[r]&&(t=e)})),t||(t=u.UPDATE_USERPROFILE_VALUE.SETNX),t},ticketReportThrottle:f,flatAuthResponse:function(e){var t=e.data.user_info;return n({},e,{data:n({},t,e.data,{user_id:t.id,expired_at:b(e.data.expires_in),alipay_user_id:t._provider&&t._provider.alipay&&t._provider.alipay.user_id})})},getExpiredAt:b,getLimitationWithEnableTigger:r(34),getResendPayload:r(35),withRetry:r(36),getBytedanceAppName:r(37),compareBaseLibraryVersion:function(e,t){e=e.split("."),t=t.split(".");for(var r=Math.max(e.length,t.length);e.length<r;)e.push("0");for(;t.length<r;)t.push("0");for(var n=0;n<r;n++){var o=parseInt(e[n]),i=parseInt(t[n]);if(o>i)return 1;if(o<i)return-1}return 0}}},function(e,t){e.exports={QUERY_LIMITATION_DEFAULT:20,STORAGE_KEY:{AUTH_TOKEN:"auth_token",USERINFO:"userinfo",UID:"uid",OPENID:"openid",UNIONID:"unionid",IS_LOGINED_BAAS:"is_logined_baas",IS_ANONYMOUS_USER:"is_anonymous_user",EXPIRES_AT:"session_expires_at",ALIPAY_USER_ID:"alipay_user_id",LATEST_VERSION_CHECK_MILLISECONDS:"latest_version_check_milliseconds",REPORT_TICKET_INVOKE_RECORD:"report_ticket_invoke_record"},VERSION_MIN_CHECK_INTERVAL:"86400000",STATUS_CODE:{CREATED:201,SUCCESS:200,UPDATE:200,PATCH:200,DELETE:204,UNAUTHORIZED:401,NOT_FOUND:404,SERVER_ERROR:500},UPLOAD:{UPLOAD_FILE_KEY:"file",HEADER_AUTH:"Authorization",HEADER_CLIENT:"X-Hydrogen-Client-ID",HEADER_AUTH_VALUE:"Hydrogen-r1 ",UA:"Mozilla/5.0 (Linux; U; Android 4.0.3; ko-kr; LG-L160L Build/IML74K) AppleWebkit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30"},USER_PROFILE_BUILD_IN_FIELDS:["id","created_at","created_by","updated_at","country","nickname","province","city","language","openid","unionid","avatar","is_authorized","gender"],httpMethodCodeMap:{GET:200,POST:201,PUT:200,PATCH:200,DELETE:204},LOG_LEVEL:{DEBUG:"debug",INFO:"info",WARN:"warn",ERROR:"error"},UPDATE_USERPROFILE_VALUE:{OVERWRITE:"overwrite",SETNX:"setnx",FALSE:"false"},TICKET_REPORT_INVOKE_LIMIT:{MIN_INTERVAL_PRE_TIME:1e3,TIMES_LIMIT:{MAX_TIMES_PER_CYCLE:20,CYCLE:864e5}},THIRD_PARTY_AUTH_MODE:{POPUP_IFRAME:"popup-iframe",POPUP_WINDOW:"popup-window",REDIRECT:"redirect"},THIRD_PARTY_AUTH_STATUS:{SUCCESS:"success",FAIL:"fail"},THIRD_PARTY_AUTH_HANDLER:{LOGIN:"login",ASSOCIATE:"associate"},THIRD_PARTY_AUTH_PROVIDER:{WECHAT_MP:"oauth-wechat-mp",WECHAT_WEB:"oauth-wechat-web",WEIBO:"oauth-weibo"},THIRD_PARTY_AUTH_URL_PARAM:{PROVIDER:"provider",REFERER:"referer",MODE:"mode",DEBUG:"debug",CREATE_USER:"create_user",UPDATE_USER_PROFILE:"update_userprofile",WECHAT_IFRAME_CONTENT_STYLE:"wechat_iframe_content_style",HANDLER:"handler",TOKEN:"token",AUTH_RESULT:"auth-result",SILENT_LOGIN:"silent_login"},PLATFORM:{WECHAT:"wechat_miniapp",ALIPAY:"alipay_miniapp",QQ:"qq_miniapp",BAIDU:"baidu_miniapp",BYTEDANCE:"bytedance_miniapp",JONGDONG:"jd_miniapp",KUAISHOU:"kuaishou_miniapp"}}},function(e,t){function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var n=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=new Error;return n.code=t,n.message=r?"".concat(t,": ").concat(r):"".concat(t,": ").concat(this.mapErrorMessage(t)),n}var t,n,o;return t=e,(n=[{key:"mapErrorMessage",value:function(e){switch(e){case 600:return"network disconnected";case 601:return"request timeout";case 602:return"uninitialized";case 603:return"unauthorized";case 604:return"session missing";case 605:return"incorrect parameter type";case 607:return"payment cancelled";case 608:return"payment failed";case 609:return"wxExtend function should be executed to allow plugin use wx.login, wx.getUserInfo, wx.requestPayment";case 610:return"errorTracker uninitialized";case 611:return"unsupported function";case 612:return"anonymous user is not allowed";case 613:return"third party auth denied";case 614:return"third party auth failed";case 615:return'gateway type "weixin_tenpay_js" works in WeChat builtin browser only';case 616:return"please enable sdk update platform user info first";default:return"unknown error"}}}])&&r(t.prototype,n),o&&r(t,o),e}();e.exports=n},function(e,t,r){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=r(3),i=r(5),s=r(1),a=r(2),u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._initQueryParams()}var t,r,u;return t=e,(r=[{key:"_initQueryParams",value:function(){this._queryObject={},this._limit=null,this._offset=0,this._orderBy=null,this._keys=null,this._expand=null}},{key:"setQuery",value:function(e){if(!(e instanceof i))throw new o(605);return this._queryObject=s.cloneDeep(e.queryObject),this}},{key:"select",value:function(e){return e instanceof Array?this._keys=e.join(","):this._keys=e,this}},{key:"expand",value:function(e){return e instanceof Array?this._expand=e.join(","):this._expand=e,this}},{key:"limit",value:function(e){if(!Number.isInteger(e))throw new o(605);return this._limit=e,this}},{key:"offset",value:function(e){if(!Number.isInteger(e))throw new o(605);return this._offset=e,this}},{key:"orderBy",value:function(e){return e instanceof Array?this._orderBy=e.join(","):this._orderBy=e,this}},{key:"_handleAllQueryConditions",value:function(){var e={};return e.limit=null===this._limit?a.QUERY_LIMITATION_DEFAULT:this._limit,e.offset=this._offset,this._orderBy&&(e.order_by=this._orderBy),this._keys&&(e.keys=this._keys),this._expand&&(e.expand=this._expand),e.where=JSON.stringify(this._queryObject),e}}])&&n(t.prototype,r),u&&n(t,u),e}();e.exports=u},function(e,t,r){function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=r(9),s=r(13),a=r(3),u=r(1),c=r(8)._serializeValueFuncFactory(["BaseRecord"]),l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.queryObject={}}var t,r,l;return t=e,l=[{key:"and",value:function(){for(var t=new e,r={$and:[]},n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return o.forEach((function(e){r.$and.push(e.queryObject)})),t._setQueryObject(r),t}},{key:"or",value:function(){for(var t=new e,r={$or:[]},n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return o.forEach((function(e){r.$or.push(e.queryObject)})),t._setQueryObject(r),t}}],(r=[{key:"compare",value:function(e,t,r){var o="eq";switch(t){case"=":o="eq";break;case"!=":o="ne";break;case"<":o="lt";break;case"<=":o="lte";break;case">":o="gt";break;case">=":o="gte";break;default:throw new a(605)}return this._addQueryObject(e,n({},o,c(r))),this}},{key:"contains",value:function(e,t){if(t&&u.isString(t))return this._addQueryObject(e,{contains:t}),this;throw new a(605)}},{key:"matches",value:function(e,t){if(t&&t instanceof RegExp){var r=u.parseRegExp(t);return r.length>1?this._addQueryObject(e,{regex:r[0],options:r[1]}):this._addQueryObject(e,{regex:r[0]}),this}throw new a(605)}},{key:"in",value:function(e,t){if(t&&t instanceof Array)return this._addQueryObject(e,{in:t.map((function(e){return c(e)}))}),this;throw new a(605)}},{key:"notIn",value:function(e,t){if(t&&t instanceof Array)return this._addQueryObject(e,{nin:t.map((function(e){return c(e)}))}),this;throw new a(605)}},{key:"arrayContains",value:function(e,t){if(t&&t instanceof Array)return this._addQueryObject(e,{all:t}),this;throw new a(605)}},{key:"isNull",value:function(e){var t=this;return e&&e instanceof Array?e.forEach((function(e){t._addQueryObject(e,{isnull:!0})})):this._addQueryObject(e,{isnull:!0}),this}},{key:"isNotNull",value:function(e){var t=this;return e&&e instanceof Array?e.forEach((function(e){t._addQueryObject(e,{isnull:!1})})):this._addQueryObject(e,{isnull:!1}),this}},{key:"exists",value:function(e){var t=this;return e&&e instanceof Array?e.forEach((function(e){t._addQueryObject(e,{exists:!0})})):this._addQueryObject(e,{exists:!0}),this}},{key:"notExists",value:function(e){var t=this;return e&&e instanceof Array?e.forEach((function(e){t._addQueryObject(e,{exists:!1})})):this._addQueryObject(e,{exists:!1}),this}},{key:"include",value:function(e,t){if(t&&t instanceof i)return this._addQueryObject(e,{intersects:t.toGeoJSON()}),this;throw new a(605)}},{key:"within",value:function(e,t){if(t&&t instanceof s)return this._addQueryObject(e,{within:t.toGeoJSON()}),this;throw new a(605)}},{key:"withinCircle",value:function(e,t,r){if(t&&t instanceof i){var n={radius:r,coordinates:[t.longitude,t.latitude]};return this._addQueryObject(e,{center:n}),this}throw new a(605)}},{key:"withinRegion",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(t&&t instanceof i){var o={geometry:t.toGeoJSON(),min_distance:n};return r&&(o.max_distance=r),this._addQueryObject(e,{nearsphere:o}),this}throw new a(605)}},{key:"hasKey",value:function(e,t){if("string"!=typeof e||"string"!=typeof t)throw a(605);return this._addQueryObject(e,{has_key:t}),this}},{key:"_setQueryObject",value:function(e){this.queryObject=e}},{key:"_addQueryObject",value:function(e,t){if(t.constructor!==Object)throw new a(605);var r=n({},e,{});Object.keys(t).forEach((function(n){r[e]["$".concat(n)]=t[n]})),this.queryObject.$and||(this.queryObject.$and=[]),this.queryObject.$and.push(r)}}])&&o(t.prototype,r),l&&o(t,l),e}();e.exports=l},function(e,t,r){(function(t){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n="__wamp_debug__";function o(){return void 0!==t&&n in t||"undefined"!=typeof window&&n in window}var i=function(e){return function(){for(var t,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];(t=console).log.apply(t,["[".concat((new Date).toISOString(),"] [").concat(e.toUpperCase(),"]")].concat(n))}},s=i("warn"),a=i("debug");function u(){return u._key++}u._key=1,e.exports={assert:function(e,t){if(!e)throw o(),new Error(t||"Assertion failed!")},canUse:function(e){return void 0!==t?e in t:"undefined"!=typeof window&&e in window},debug:function(){if(o())return a.apply(void 0,arguments)},deferred_factory:function(){return function(){var e={};return e.promise=new Promise((function(t,r){e.resolve=t,e.reject=r})),e}},handle_error:function(e,t,r){"function"==typeof e?e(t,r):console.error(r||"unhandled exception raised: ",t)},isDebug:o,is_object:function(e){return!Array.isArray(e)&&(e instanceof Object||"object"===r(e))},opt:function(e,t){return void 0!==e?e:t},promisify:function(e){return function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return new Promise((function(t,n){e.apply(void 0,r.concat([function(e,r){return e?n(e):t(r)}]))}))}},rand_normal:function(e,t){var r,n,o;do{o=(r=2*Math.random()-1)*r+(n=2*Math.random()-1)*n}while(o>=1||0==o);return(e||0)+r*Math.sqrt(-2*Math.log(o)/o)*(t||1)},setDebug:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];void 0===t?"undefined"==typeof window||(window[n]=e):t[n]=e},warn:s,asyncCache:function(e){var t=!1,r=[];return function(){for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return new Promise((function(n,i){r.push({resolve:n,reject:i}),t||(t=!0,e.apply(void 0,o).then((function(e){for(var n=0;n<r.length;n++){(0,r[n].resolve)(e)}t=!1,r=[]})).catch((function(e){for(var n=0;n<r.length;n++){(0,r[n].reject)(e)}t=!1,r=[]})))}))}},generateKey:u}}).call(this,r(15))},function(e,t,r){var n=r(0);e.exports={set:function(e,t){return n._polyfill.setStorageAsync("ifx_baas_"+e,t)},get:function(e){return n._polyfill.getStorageAsync("ifx_baas_"+e)}}},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=r(3);function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["BaseRecord"],t=r(9),n=r(13);return function(r){return e.includes("Geo")&&(r instanceof t||r instanceof n)?r.toGeoJSON():e.includes("BaseRecord")&&r instanceof a?null==r._recordID?"":r._recordID.toString():r}}var a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._recordID=t,this._recordValueInit()}var t,r,a;return t=e,(r=[{key:"_recordValueInit",value:function(){this._record={$set:{},$unset:{}}}},{key:"set",value:function(){for(var e=this,t=s(["BaseRecord","Geo"]),r=s(["Geo"]),o=arguments.length,a=new Array(o),u=0;u<o;u++)a[u]=arguments[u];if(1===a.length){if("object"!==n(a[0]))throw new i(605);var c=a[0],l={};Object.keys(a[0]).forEach((function(n){if(e._record.$unset.hasOwnProperty(n))throw new i(605);var o=c[n];Array.isArray(o)?l[n]=o.map((function(e){return r(e)})):l[n]=t(o)})),this._record.$set=l}else{if(2!==a.length)throw new i(605);if(this._record.$unset.hasOwnProperty(a[0]))throw new i(605);var f=a[1];Array.isArray(f)?this._record.$set[a[0]]=f.map((function(e){return r(e)})):this._record.$set[a[0]]=t(f)}return this}},{key:"unset",value:function(){for(var e=this,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];if("object"===n(r[0])){var s={};Object.keys(r[0]).forEach((function(t){if(e._record.$set.hasOwnProperty(t))throw new i(605);s[t]=""})),this._record.$unset=s}else{if("string"!=typeof r[0])throw new i(605);if(this._record.$set.hasOwnProperty(r[0]))throw new i(605);this._record.$unset[r[0]]=""}return this}},{key:"incrementBy",value:function(e,t){return this._record.$set[e]={$incr_by:t},this}},{key:"append",value:function(e,t){var r=s(["Geo"]);return t instanceof Array||(t=[t]),t=t.map((function(e){return r(e)})),this._record.$set[e]={$append:t},this}},{key:"uAppend",value:function(e,t){var r=s(["Geo"]);return t instanceof Array||(t=[t]),t=t.map((function(e){return r(e)})),this._record.$set[e]={$append_unique:t},this}},{key:"remove",value:function(e,t){var r=s(["Geo"]);return t instanceof Array||(t=[t]),t=t.map((function(e){return r(e)})),this._record.$set[e]={$remove:t},this}},{key:"patchObject",value:function(e,t){if("[object Object]"!==Object.prototype.toString.call(t))throw new i(605);return this._record.$set[e]={$update:t},this}},{key:"pop",value:function(e){if("string"!=typeof e||0===e.length)throw new i(605);return this._record.$set[e]={$pop:1},this}},{key:"shift",value:function(e){if("string"!=typeof e||0===e.length)throw new i(605);return this._record.$set[e]={$pop:-1},this}}])&&o(t.prototype,r),a&&o(t,a),e}();a._serializeValueFuncFactory=s,e.exports=a},function(e,t,r){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=r(1),i=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.longitude=t,this.latitude=r,this.geoJSON={type:"Point",coordinates:[this.longitude,this.latitude]}}var t,r,i;return t=e,(r=[{key:"toGeoJSON",value:function(){return o.cloneDeep(this.geoJSON)}}])&&n(t.prototype,r),i&&n(t,i),e}();e.exports=i},,function(e,t,r){var n=r(2),o=r(30),i=function(e){return o({level:e})},s=i(n.LOG_LEVEL.ERROR);e.exports={log:function(e,t){s[e]&&s[e](t)},setLogLevel:function(e){Object.keys(n.LOG_LEVEL).forEach((function(t){n.LOG_LEVEL[t]===e&&(s=i(e))}))}}},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u=r(0),c=r(8),l=r(1),f=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i(this,s(t).call(this,e))}var r,n,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(t,e),r=t,(n=[{key:"update",value:function(){var e=l.cloneDeep(this._record);return this._recordValueInit(),u.updateUser({data:e.$set})}}])&&o(r.prototype,n),c&&o(r,c),t}(c);f.initCurrentUser=function(e){return new(r(38))(e)},e.exports=f},function(e,t,r){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=r(9),i=r(3),s=r(1),a=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!(t&&t instanceof Array))throw new i(605);if(t.length<4)throw new i(605);this.points=t,this.geoJSON={type:"Polygon",coordinates:[]}}var t,r,a;return t=e,(r=[{key:"toGeoJSON",value:function(){var e=[];return this.points.forEach((function(t){if(t instanceof o)e.push([t.longitude,t.latitude]);else{if(!(t instanceof Array&&2===t.length))throw new i(605);e.push(t)}})),this.geoJSON.coordinates=[e],s.cloneDeep(this.geoJSON)}}])&&n(t.prototype,r),a&&n(t,a),e}();e.exports=a},,function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=r(0),l=r(4),f=r(12),_=r(1),p=r(3),h=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,a(t).call(this))}var r,n,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,e),r=t,(n=[{key:"get",value:function(e){var t={userID:e};return this._expand&&(t.expand=this._expand),this._keys&&(t.keys=this._keys),this._initQueryParams(),c.getUserDetail(t)}},{key:"getWithoutData",value:function(e){if(_.isString(e)||Number.isInteger(e))return new f(e);throw new p(605)}},{key:"getCurrentUserWithoutData",value:function(){return new f}},{key:"find",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.withCount,r=void 0!==t&&t,n=this._handleAllQueryConditions();return this._initQueryParams(),c.getUserList(o({},n,{return_total_count:r?1:0}))}},{key:"count",value:function(){return this.limit(1).find({withCount:!0}).then((function(e){return e.data.meta.total_count}))}}])&&i(r.prototype,n),l&&i(r,l),t}(l);e.exports=h},function(e,t,r){var n=r(0),o=r(3),i=n._config.API;e.exports=function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e)throw new o(605);var s={function_name:e,sync:r};return void 0!==t&&(s.data=t),n._baasRequest({url:i.CLOUD_FUNCTION,method:"POST",data:s}).then((function(e){return e.data}))}},function(e,t,r){var n=r(0);e.exports={set:function(e,t){n._polyfill.setStorageSync("ifx_baas_"+e,t)},get:function(e){return n._polyfill.getStorageSync("ifx_baas_"+e)}}},,function(e,t,r){function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(o)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var o=r(0),i=r(2),s=r(3),a=r(7),u=r(1),c=r(12),l=r(16),f=o._config.API;function _(e,t){return e.phone?t?f.LOGIN_PHONE:f.REGISTER_PHONE:e.email?t?f.LOGIN_EMAIL:f.REGISTER_EMAIL:t?f.LOGIN_USERNAME:f.REGISTER_USERNAME}function p(e){return e.phone?{phone:e.phone,password:e.password}:e.email?{email:e.email,password:e.password}:{username:e.username||"",password:e.password}}var h=function(e,t){var r=c.initCurrentUser(e);return r.user_id=e.id,r.session_expires_at=t,r},d=function(){return Promise.all([a.get(i.STORAGE_KEY.UID),a.get(i.STORAGE_KEY.EXPIRES_AT),u.isSessionExpired()]).then((function(e){var t=n(e,3),r=t[0],o=t[1],i=t[2];return r&&o&&!i?(new l).get(r).then((function(e){return h(e.data,o)})):Promise.reject(new s(604))}))};e.exports={login:u.rateLimit((function(e){var t=_(e,!0),r=p(e);return o.request({url:t,method:"POST",data:r}).then(u.validateStatusCode).then((function(e){return o._polyfill.handleLoginSuccess(e),d()}))})),logout:function(){return o.request({url:f.LOGOUT,method:"POST"}).then(u.validateStatusCode).then((function(e){return o.clearSession().then((function(){return e}))}))},silentLogin:function(){return Promise.reject(new s(605,"silentLogin ÊñπÊ≥ïÊú™ÂÆö‰πâ"))},loginWithSmsVerificationCode:u.rateLimit((function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.createUser,i=void 0===n||n;return o.request({url:f.LOGIN_SMS,data:{phone:e,code:t,create_user:i},method:"POST"}).then(u.validateStatusCode).then((function(e){return o._polyfill.handleLoginSuccess(e,!1),d()}))})),anonymousLogin:u.rateLimit((function(){return o.request({url:f.ANONYMOUS_LOGIN,method:"POST"}).then(u.validateStatusCode).then((function(e){return o._polyfill.handleLoginSuccess(e,!0),d()}))})),requestPasswordReset:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.email;return o.request({url:f.PASSWORD_RESET,method:"POST",data:{email:t}}).then(u.validateStatusCode)},register:u.rateLimit((function(e){var t=_(e),r=p(e);return o.request({url:t,method:"POST",data:r}).then(u.validateStatusCode).then((function(e){return o._polyfill.handleLoginSuccess(e),d()}))})),_initCurrentUser:h,getCurrentUser:u.rateLimit(d)}},,,function(e,t){var r,n,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(r===setTimeout)return setTimeout(e,0);if((r===i||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:i}catch(e){r=i}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(e){n=s}}();var u,c=[],l=!1,f=-1;function _(){l&&u&&(l=!1,u.length?c=u.concat(c):f=-1,c.length&&p())}function p(){if(!l){var e=a(_);l=!0;for(var t=c.length;t;){for(u=c,c=[];++f<t;)u&&u[f].run();f=-1,t=c.length}u=null,l=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function d(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new h(e,t)),1!==c.length||l||a(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=d,o.addListener=d,o.once=d,o.off=d,o.removeListener=d,o.removeAllListeners=d,o.emit=d,o.prependListener=d,o.prependOnceListener=d,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},,,function(e,t){var r={REGISTER_USERNAME:"/hserve/v2.1/register/username/",REGISTER_EMAIL:"/hserve/v2.1/register/email/",REGISTER_PHONE:"/hserve/v2.1/register/phone/",LOGIN_USERNAME:"/hserve/v2.1/login/username/",LOGIN_EMAIL:"/hserve/v2.1/login/email/",LOGIN_PHONE:"/hserve/v2.1/login/phone/",LOGIN_SMS:"/hserve/v2.1/login/sms/",EMAIL_VERIFY:"/hserve/v2.0/user/email-verify/",VERIFY_MOBILE:"/hserve/v2.1/sms-phone-verification/",ACCOUNT_INFO:"/hserve/v2.2/user/account/",PASSWORD_RESET:"/hserve/v2.0/user/password/reset/",ANONYMOUS_LOGIN:"/hserve/v2.0/login/anonymous/",LOGOUT:"/hserve/v2.0/session/destroy/",SERVER_TIME:"/hserve/v2.2/server/time/",NATIVE_OAUTH_AUTH:"/hserve/v2.3/idp/oauth/:provider/authenticate/",NATIVE_OAUTH_ASSOCIATION:"/hserve/v2.3/idp/oauth/:provider/user-association/",UPLOAD:"/hserve/v2.1/upload/",CLOUD_FUNCTION:"/hserve/v1/cloud-function/job/",USER_DETAIL:"/hserve/v2.5/user/info/:userID/",USER_LIST:"/hserve/v2.2/user/info/",UPDATE_USER:"/hserve/v2.5/user/info/",TABLE_LIST:"/hserve/v2.0/table/",TABLE_DETAIL:"/hserve/v2.0/table/:tableID/",RECORD_LIST:"/hserve/v2.4/table/:tableID/record/",QUERY_RECORD_LIST:"/hserve/v2.4/table/:tableID/record/",CREATE_RECORD_LIST:"/hserve/v2.4/table/:tableID/record/?enable_trigger=:enable_trigger",RECORD_DETAIL:"/hserve/v2.5/table/:tableID/record/:recordID/",CREATE_RECORD:"/hserve/v2.4/table/:tableID/record/?expand=:expand",UPDATE_RECORD:"/hserve/v2.5/table/:tableID/record/:recordID/?enable_trigger=:enable_trigger&expand=:expand",UPDATE_RECORD_LIST:"/hserve/v2.4/table/:tableID/record/?limit=:limit&offset=:offset&where=:where&enable_trigger=:enable_trigger&return_total_count=:return_total_count",DELETE_RECORD:"/hserve/v2.5/table/:tableID/record/:recordID/",DELETE_RECORD_LIST:"/hserve/v2.4/table/:tableID/record/?limit=:limit&offset=:offset&where=:where&enable_trigger=:enable_trigger&return_total_count=:return_total_count",LAGECY_CONTENT_LIST:"/hserve/v1/content/detail/",CONTENT_LIST:"/hserve/v2.2/content/detail/",CONTENT_GROUP_LIST:"/hserve/v2.2/content/group/",CONTENT_DETAIL:"/hserve/v2.0/content/detail/:richTextID/",CONTENT_GROUP_DETAIL:"/hserve/v2.2/content/group/:contentGroupID/",CONTENT_CATEGORY_LIST:"/hserve/v2.2/content/category/",CONTENT_CATEGORY_DETAIL:"/hserve/v2.0/content/category/:categoryID/",FILE_DETAIL:"/hserve/v2.1/uploaded-file/:fileID/",FILE_LIST:"/hserve/v2.2/uploaded-file/",DELETE_FILE:"/hserve/v2.1/uploaded-file/:fileID/",DELETE_FILES:"/hserve/v2.1/uploaded-file/",FILE_CATEGORY_DETAIL:"/hserve/v1.3/file-category/:categoryID/",FILE_CATEGORY_LIST:"/hserve/v2.2/file-category/",CENSOR_IMAGE:"/hserve/v1.7/censor-image/",CENSOR_MSG:"/hserve/v1.7/censor-msg/",SEND_SMS_CODE:"/hserve/v2.2/sms-verification-code/",VERIFY_SMS_CODE:"/hserve/v1.8/sms-verification-code/verify/",PAY:"/hserve/v2.2/idp/pay/order/",ORDER:"/hserve/v2.0/idp/pay/order/:transactionID/",TEMPLATE_MESSAGE_EVENT_REPORT:"/hserve/v2.0/template-message/event-report/",WEB:{THIRD_PARTY_ASSOCIATE:"/hserve/v2.0/idp/:provider/user-association/",THIRD_PARTY_AUTH:"/hserve/v2.0/idp/:provider/redirect/",THIRD_PARTY_LOGIN:"/hserve/v2.0/idp/:provider/authenticate/",THIRD_PARTY_SILENT_LOGIN:"/hserve/v2.5/idp/:provider/silent-login/"},WECHAT:{SILENT_LOGIN:"/hserve/v2.5/idp/wechat/silent-login/",AUTHENTICATE:"/hserve/v2.5/idp/wechat/authenticate/",USER_ASSOCIATE:"/hserve/v2.4/idp/wechat/user-associate/",TEMPLATE_MESSAGE:"/hserve/v2.0/template-message-ticket/",SUBSCRIBE_MESSAGE:"/hserve/v2.2/subscription-message/relationship-report/",DECRYPT:"/hserve/v2.7/wechat/decrypt/",DECRYPT_OLD:"/hserve/v1/wechat/decrypt/",WXACODE:"/hserve/v2.4/miniappcode/",CENSOR_IMAGE:"/hserve/v2.6/censor-image/",CENSOR_MSG:"/hserve/v1.7/censor-msg/",CENSOR_ASYNC:"/hserve/v2.2/async-censor/",JSSDK_CREDENTIALS:"/hserve/v2.4/idp/wechat/jssdk-credentials/",PHONE_LOGIN:"/hserve/v2.7/idp/wechat/phone-login/",PHONE_LOGIN_OLD:"/hserve/v2.5/idp/wechat/phone-login/",UPDATE_PHONE:"/hserve/v2.7/idp/wechat/phone-verification/",UPDATE_PHONE_OLD:"/hserve/v2.5/idp/wechat/phone-verification/",UPDATE_USER_INFO:"/hserve/v2.5/idp/wechat/user/info/",UPDATE_USER_INFO_UPGRADED:"/hserve/v2.6/idp/wechat/user/info/",USER_RISK_RANK:"/hserve/v2.5/user-riskrank/",PRIVATE_MESSAGE:"/hserve/v2.5/private-message/"},QQ:{SILENT_LOGIN:"/hserve/v2.5/idp/qq/silent-login/",AUTHENTICATE:"/hserve/v2.5/idp/qq/authenticate/",USER_ASSOCIATE:"/hserve/v2.0/idp/qq/user-association/",TEMPLATE_MESSAGE:"/hserve/v2.0/template-message-ticket/",SUBSCRIBE_MESSAGE:"/hserve/v2.2/subscription-message/relationship-report/",DECRYPT:"/hserve/v2.0/qq/decrypt/",CENSOR_IMAGE:"/hserve/v2.2/qq/censor-image/",CENSOR_MSG:"/hserve/v2.2/qq/censor-msg/"},BAIDU:{SILENT_LOGIN:"/hserve/v2.5/idp/baidu/silent-login/",AUTHENTICATE:"/hserve/v2.5/idp/baidu/authenticate/",USER_ASSOCIATE:"/hserve/v2.1/idp/baidu/user-association/",TEMPLATE_MESSAGE:"/hserve/v2.0/template-message-ticket/"},ALIPAY:{SILENT_LOGIN:"/hserve/v2.5/idp/alipay/silent-login/",AUTHENTICATE:"/hserve/v2.5/idp/alipay/authenticate/",USER_ASSOCIATE:"/hserve/v2.0/idp/alipay/user-associate/",TEMPLATE_MESSAGE:"/hserve/v2.0/template-message-ticket/",MINIAPP_QR_CODE:"/hserve/v2.0/idp/alipay/miniapp-qr-code/",CENSOR_MSG:"/hserve/v2.4/alipay/censor-msg/"},BYTEDANCE:{SILENT_LOGIN:"/hserve/v2.5/idp/bytedance/silent-login/",AUTHENTICATE:"/hserve/v2.5/idp/bytedance/authenticate/",USER_ASSOCIATE:"/hserve/v2.4/idp/bytedance/user-association/",TEMPLATE_MESSAGE:"/hserve/v2.0/template-message-ticket/",MINIAPP_QR_CODE:"/hserve/v2.4/idp/bytedance/miniapp-qr-code/"},JINGDONG:{SILENT_LOGIN:"/hserve/v2.5/idp/jd/silent-login/",AUTHENTICATE:"/hserve/v2.5/idp/jd/authenticate/",USER_ASSOCIATE:"/hserve/v2.4/idp/jd/user-association/"},KUAISHOU:{SILENT_LOGIN:"/hserve/v2.5/idp/kuaishou/silent-login/",AUTHENTICATE:"/hserve/v2.5/idp/kuaishou/authenticate/",USER_ASSOCIATE:"/hserve/v2.5/idp/kuaishou/user-association/",SUBSCRIBE_MESSAGE:"/hserve/v2.2/subscription-message/relationship-report/",PHONE_LOGIN:"/hserve/v2.5/idp/kuaishou/phone-login/",UPDATE_PHONE:"/hserve/v2.5/idp/kuaishou/phone-verification/"},VIDEO_SNAPSHOT:"/hserve/v1/media/video-snapshot/",M3U8_CONCAT:"/hserve/v1/media/m3u8-concat/",M3U8_CLIP:"/hserve/v1/media/m3u8-clip/",M3U8_META:"/hserve/v1/media/m3u8-meta/",VIDEO_AUDIO_META:"/hserve/v1/media/audio-video-meta/",GET_ASYNC_JOB_RESULT:"/hserve/v1/bulk-operation/:id/",LATEST_VERSION:"/hserve/v1/latest-sdk-version/"},n=[{getUserInfo:{url:r.USER_DETAIL,defaultParams:{userID:""}},getUserDetail:{url:r.USER_DETAIL},getUserList:{url:r.USER_LIST},updateUser:{url:r.UPDATE_USER,method:"PUT"}},{getTableList:{url:r.TABLE_LIST},getTable:{url:r.TABLE_DETAIL},getRecordList:{url:r.RECORD_LIST},queryRecordList:{url:r.QUERY_RECORD_LIST},getRecord:{url:r.RECORD_DETAIL},createRecord:{url:r.CREATE_RECORD,method:"POST"},createRecordList:{url:r.CREATE_RECORD_LIST,method:"POST"},updateRecord:{url:r.UPDATE_RECORD,method:"PUT"},updateRecordList:{url:r.UPDATE_RECORD_LIST,method:"PUT"},deleteRecord:{url:r.DELETE_RECORD,method:"DELETE"},deleteRecordList:{url:r.DELETE_RECORD_LIST,method:"DELETE"}},{getContentList:{url:r.LAGECY_CONTENT_LIST},getContentListV2:{url:r.CONTENT_LIST},getContent:{url:r.CONTENT_DETAIL},getContentGroupList:{url:r.CONTENT_GROUP_LIST},getContentGroup:{url:r.CONTENT_GROUP_DETAIL},getContentCategoryList:{url:r.CONTENT_CATEGORY_LIST},getContentCategory:{url:r.CONTENT_CATEGORY_DETAIL}},{getFileDetail:{url:r.FILE_DETAIL},getFileList:{url:r.FILE_LIST},deleteFile:{url:r.DELETE_FILE,method:"DELETE"},deleteFiles:{url:r.DELETE_FILES,method:"DELETE"},getFileCategoryDetail:{url:r.FILE_CATEGORY_DETAIL},getFileCategoryList:{url:r.FILE_CATEGORY_LIST},sendSmsCode:{url:r.SEND_SMS_CODE,method:"POST"},verifySmsCode:{url:r.VERIFY_SMS_CODE,method:"POST"}},{getOrderList:{url:r.PAY}}];e.exports={API_HOST:"https://api.myminapp.com",API:r,AUTH_PREFIX:"Hydrogen-r1",METHOD_MAP_LIST:n,DEBUG:!1,RANDOM_OPTION:{max:100},REQUEST_PARAMS_MAP:{contentGroupID:"content_group_id",categoryID:"category_id",recordID:"id",submissionType:"submission_type",submissionValue:"submission_value",categoryName:"category_name",signatureID:"signature_id",randomFileLink:"random_file_link"},SDK_DOWNLOAD_PAGE:"https://doc.minapp.com/js-sdk/download-sdk.html",VERSION:"v2.0.1-a",WS_HOST:"wss://api.ws.myminapp.com",WS_PATH:"ws/hydrogen/",WS_REALM:"com.ifanrcloud",WS_BASE_TOPIC:"com.ifanrcloud.schema_event"}},function(e,t,r){var n=null;"undefined"!=typeof window&&window.WebSocket&&(n=window.WebSocket),e.exports={getAPIHost:function(){var e=r(0);return e._config.API_HOST||"https://".concat(e._config.CLIENT_ID,".myminapp.com")},getWSHost:function(){var e=r(0);return e._config.WS_HOST||"wss://".concat(e._config.CLIENT_ID,".ws.myminapp.com")},SDK_TYPE:"file",CLIENT_PLATFORM:"UNKNOWN",checkLatestVersion:function(){return null},WebSocket:n}},function(e,t,r){var n=r(2),o=r(18),i=r(7),s=r(3),a=r(1);e.exports=function(e){e.init=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.autoLogin,o=void 0!==n&&n,i=r.logLevel,u=void 0===i?"":i,c=r.host,l=void 0===c?"":c,f=r.ws_host,_=void 0===f?"":f,p=r.env;if(!a.isString(t))throw new s(605);u&&a.setLogLevel(u),e._config.AUTO_LOGIN=o,e._config.ENV=p,e._config.CLIENT_ID=t,e._config.API_HOST=l,e._config.WS_HOST=_,e._config.LOG_LEVEL=u,e._polyfill.checkLatestVersion()},e.getAuthToken=function(){return i.get(n.STORAGE_KEY.AUTH_TOKEN)},e.checkVersion=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.platform,o=t.onSuccess,s=t.onError;o||(o=function(t){var o=t.statusCode||t.status;parseInt(o)!==n.STATUS_CODE.SUCCESS?s&&s(t):-1===a.compareVersion(e._config.VERSION,t.data[r])&&a.log(n.LOG_LEVEL.WARN,"„ÄêÁü•Êôì‰∫ë SDK Êõ¥Êñ∞ÊèêÁ§∫„ÄëÂΩìÂâç SDK ÁâàÊú¨‰∏∫ ".concat(e._config.VERSION," ÊúÄÊñ∞ÁâàÊú¨‰∏∫ ").concat(t.data[r],"ÔºåËØ∑ÂâçÂæÄ ").concat(e._config.SDK_DOWNLOAD_PAGE," ‰∏ãËΩΩ„ÄÇ"))});var u=Date.now();return i.get(n.STORAGE_KEY.LATEST_VERSION_CHECK_MILLISECONDS).then((function(t){if(!(t&&t-u<=n.VERSION_MIN_CHECK_INTERVAL))return i.set(n.STORAGE_KEY.LATEST_VERSION_CHECK_MILLISECONDS,u),e.request({url:e._config.API.LATEST_VERSION}).then(o,s)}))},e.clearSession=function(){return Promise.all([i.set(n.STORAGE_KEY.AUTH_TOKEN,""),i.set(n.STORAGE_KEY.IS_LOGINED_BAAS,""),i.set(n.STORAGE_KEY.IS_ANONYMOUS_USER,""),i.set(n.STORAGE_KEY.USERINFO,""),i.set(n.STORAGE_KEY.UID,"")])},e._createRequestMethod=function(){e._config.METHOD_MAP_LIST.map((function(e){a.doCreateRequestMethod(e)}))},e.auth=r(20),e.ContentGroup=r(39),e.File=r(40),e.FileCategory=r(41),e.GeoPoint=r(9),e.GeoPolygon=r(13),e.invokeFunction=r(17),e.invoke=r(17),e.Query=r(5),e.storage=o,e.storageAsync=i,e.TableObject=r(42),e.User=r(16),e.Order=r(50),e.getAsyncJobResult=r(51),e.getServerDate=r(52)}},function(e,t,r){var n,o=r(2),i=r(7),s=r(11).log,a=function(){return{invokeTimes:1,timestamp:Date.now()}},u=function(e){return isNaN(e.invokeTimes)||isNaN(e.timestamp)};e.exports=function(e){return function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=r.enableThrottle,l=void 0!==c&&c;if(!l)return e(t);var f=o.LOG_LEVEL,_=o.TICKET_REPORT_INVOKE_LIMIT,p=o.STORAGE_KEY,h=Date.now();return s(f.DEBUG,"<ticket-report> last: ".concat(n,", now: ").concat(h)),n&&h-n<=_.MIN_INTERVAL_PRE_TIME?Promise.resolve():i.get(p.REPORT_TICKET_INVOKE_RECORD).then((function(r){var o=r&&h-r.timestamp>_.TIMES_LIMIT.CYCLE;return s(f.DEBUG,"<ticket-report> record: ".concat(JSON.stringify(r),", now: ").concat(h)),r&&r.invokeTimes>=_.TIMES_LIMIT.MAX_TIMES_PER_CYCLE&&!o?Promise.resolve():(!r||o||u(r)?r=a():r.invokeTimes+=1,e&&"function"==typeof e?(n=h,i.set(p.REPORT_TICKET_INVOKE_RECORD,r),e(t).then((function(e){return s(f.DEBUG,"<ticket-report> invoke success ".concat(Date.now()-h,"ms")),e})).catch((function(e){throw r.invokeTimes-=1,i.set(p.REPORT_TICKET_INVOKE_RECORD,r),s(f.DEBUG,"<ticket-report> invoke fail ".concat(Date.now()-h,"ms err: ").concat(e)),e}))):(s(f.DEBUG,"<ticket-report> invoke fail"),void s(f.ERROR,new TypeError('"ticketReportFn" must be Function type'))))}))}}},function(e,t,r){"use strict";var n=r(31),o=["trace","debug","info","warn","error","fatal"],i=function(){};e.exports=function(e){(e=e||{}).level=e.level||"info";var t={};return o.forEach((function(r){t[r]=function(t){return o.indexOf(t)>=o.indexOf(e.level)}(r)?function(){var t,o=e.prefix;if(e.stderr)t="error";else switch(r){case"trace":case"debug":t="info";break;case"fatal":t="error";break;default:t=r}o&&("function"==typeof o&&(o=o(r)),arguments[0]=n.format(o,arguments[0]));console[t](n.format.apply(n,arguments))}:i})),t}},function(e,t,r){(function(e){var n=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++)r[t[n]]=Object.getOwnPropertyDescriptor(e,t[n]);return r},o=/%[sdj%]/g;t.format=function(e){if(!v(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(a(arguments[r]));return t.join(" ")}r=1;for(var n=arguments,i=n.length,s=String(e).replace(o,(function(e){if("%%"===e)return"%";if(r>=i)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return e}})),u=n[r];r<i;u=n[++r])d(u)||!E(u)?s+=" "+u:s+=" "+a(u);return s},t.deprecate=function(r,n){if(void 0!==e&&!0===e.noDeprecation)return r;if(void 0===e)return function(){return t.deprecate(r,n).apply(this,arguments)};var o=!1;return function(){if(!o){if(e.throwDeprecation)throw new Error(n);e.traceDeprecation?console.trace(n):console.error(n),o=!0}return r.apply(this,arguments)}};var i,s={};function a(e,r){var n={seen:[],stylize:c};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),h(r)?n.showHidden=r:r&&t._extend(n,r),g(n.showHidden)&&(n.showHidden=!1),g(n.depth)&&(n.depth=2),g(n.colors)&&(n.colors=!1),g(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=u),l(n,e,n.depth)}function u(e,t){var r=a.styles[t];return r?"["+a.colors[r][0]+"m"+e+"["+a.colors[r][1]+"m":e}function c(e,t){return e}function l(e,r,n){if(e.customInspect&&r&&O(r.inspect)&&r.inspect!==t.inspect&&(!r.constructor||r.constructor.prototype!==r)){var o=r.inspect(n,e);return v(o)||(o=l(e,o,n)),o}var i=function(e,t){if(g(t))return e.stylize("undefined","undefined");if(v(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}if(y(t))return e.stylize(""+t,"number");if(h(t))return e.stylize(""+t,"boolean");if(d(t))return e.stylize("null","null")}(e,r);if(i)return i;var s=Object.keys(r),a=function(e){var t={};return e.forEach((function(e,r){t[e]=!0})),t}(s);if(e.showHidden&&(s=Object.getOwnPropertyNames(r)),w(r)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return f(r);if(0===s.length){if(O(r)){var u=r.name?": "+r.name:"";return e.stylize("[Function"+u+"]","special")}if(b(r))return e.stylize(RegExp.prototype.toString.call(r),"regexp");if(m(r))return e.stylize(Date.prototype.toString.call(r),"date");if(w(r))return f(r)}var c,E="",S=!1,T=["{","}"];(p(r)&&(S=!0,T=["[","]"]),O(r))&&(E=" [Function"+(r.name?": "+r.name:"")+"]");return b(r)&&(E=" "+RegExp.prototype.toString.call(r)),m(r)&&(E=" "+Date.prototype.toUTCString.call(r)),w(r)&&(E=" "+f(r)),0!==s.length||S&&0!=r.length?n<0?b(r)?e.stylize(RegExp.prototype.toString.call(r),"regexp"):e.stylize("[Object]","special"):(e.seen.push(r),c=S?function(e,t,r,n,o){for(var i=[],s=0,a=t.length;s<a;++s)I(t,String(s))?i.push(_(e,t,r,n,String(s),!0)):i.push("");return o.forEach((function(o){o.match(/^\d+$/)||i.push(_(e,t,r,n,o,!0))})),i}(e,r,n,a,s):s.map((function(t){return _(e,r,n,a,t,S)})),e.seen.pop(),function(e,t,r){if(e.reduce((function(e,t){return t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1];return r[0]+t+" "+e.join(", ")+" "+r[1]}(c,E,T)):T[0]+E+T[1]}function f(e){return"["+Error.prototype.toString.call(e)+"]"}function _(e,t,r,n,o,i){var s,a,u;if((u=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]}).get?a=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(a=e.stylize("[Setter]","special")),I(n,o)||(s="["+o+"]"),a||(e.seen.indexOf(u.value)<0?(a=d(r)?l(e,u.value,null):l(e,u.value,r-1)).indexOf("\n")>-1&&(a=i?a.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+a.split("\n").map((function(e){return"   "+e})).join("\n")):a=e.stylize("[Circular]","special")),g(s)){if(i&&o.match(/^\d+$/))return a;(s=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+a}function p(e){return Array.isArray(e)}function h(e){return"boolean"==typeof e}function d(e){return null===e}function y(e){return"number"==typeof e}function v(e){return"string"==typeof e}function g(e){return void 0===e}function b(e){return E(e)&&"[object RegExp]"===S(e)}function E(e){return"object"==typeof e&&null!==e}function m(e){return E(e)&&"[object Date]"===S(e)}function w(e){return E(e)&&("[object Error]"===S(e)||e instanceof Error)}function O(e){return"function"==typeof e}function S(e){return Object.prototype.toString.call(e)}function T(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(r){if(g(i)&&(i=e.env.NODE_DEBUG||""),r=r.toUpperCase(),!s[r])if(new RegExp("\\b"+r+"\\b","i").test(i)){var n=e.pid;s[r]=function(){var e=t.format.apply(t,arguments);console.error("%s %d: %s",r,n,e)}}else s[r]=function(){};return s[r]},t.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=p,t.isBoolean=h,t.isNull=d,t.isNullOrUndefined=function(e){return null==e},t.isNumber=y,t.isString=v,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=g,t.isRegExp=b,t.isObject=E,t.isDate=m,t.isError=w,t.isFunction=O,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=r(32);var A=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function R(){var e=new Date,t=[T(e.getHours()),T(e.getMinutes()),T(e.getSeconds())].join(":");return[e.getDate(),A[e.getMonth()],t].join(" ")}function I(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log("%s - %s",R(),t.format.apply(t,arguments))},t.inherits=r(33),t._extend=function(e,t){if(!t||!E(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e};var P="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function D(e,t){if(!e){var r=new Error("Promise was rejected with a falsy value");r.reason=e,e=r}return t(e)}t.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(P&&e[P]){var t;if("function"!=typeof(t=e[P]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,P,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,r,n=new Promise((function(e,n){t=e,r=n})),o=[],i=0;i<arguments.length;i++)o.push(arguments[i]);o.push((function(e,n){e?r(e):t(n)}));try{e.apply(this,o)}catch(e){r(e)}return n}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),P&&Object.defineProperty(t,P,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,n(e))},t.promisify.custom=P,t.callbackify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');function r(){for(var r=[],n=0;n<arguments.length;n++)r.push(arguments[n]);var o=r.pop();if("function"!=typeof o)throw new TypeError("The last argument must be of type Function");var i=this,s=function(){return o.apply(i,arguments)};t.apply(this,r).then((function(t){e.nextTick(s,null,t)}),(function(t){e.nextTick(D,t,s)}))}return Object.setPrototypeOf(r,Object.getPrototypeOf(t)),Object.defineProperties(r,n(t)),r}}).call(this,r(23))},function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},function(e,t,r){var n=r(2);e.exports=function(e,t){return null!=e?e:t?n.QUERY_LIMITATION_DEFAULT:void 0}},function(e,t,r){function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var o=r(2),i=function(e,t){return(t?Promise.resolve(t):e.storageAsync.get(o.STORAGE_KEY.UID)).then((function(t){return e._config.API.USER_DETAIL.replace(/:userID/,t)}))};e.exports=function(e,t,r){return i(e,r).then((function(r){return(t.url===r?i(e):Promise.resolve(t.url)).then((function(e){return n({},t,{url:e})}))}))}},function(e,t,r){var n=r(2),o=r(11).log,i=function(e,t){return!!e&&(!t||("[object RegExp]"===Object.prototype.toString.call(t)?t.test(e.message):e.message===t))};e.exports=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.context,s=void 0===r?{}:r,a=t.maxCount,u=void 0===a?10:a,c=t.matchMessage;return function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];var l=u,f=function t(){var a=function(r){if(i(r,c)&&l>1)return o(n.LOG_LEVEL.DEBUG,'<withRetry> "'.concat(e.name,'" called fail, remaindCount: ').concat(l,", err: ").concat(r)),l-=1,t();throw r};try{var u=e.apply(s,r);return"[object Promise]"===Object.prototype.toString.call(u)?u.catch(a):u}catch(e){return a(e)}};return f()}}},function(e,t){e.exports=function(){return"undefined"==typeof tt?"":tt.getSystemInfoSync().appName.toLowerCase()}},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=r(12),l=r(0),f=r(3),_=r(1),p=r(2).USER_PROFILE_BUILD_IN_FIELDS,h=l._config.API,d=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=s(this,a(t).call(this)),_.isObject(e)?(r.initAttribute(e),r):s(r,new f(605))}var r,n,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,e),r=t,(n=[{key:"initAttribute",value:function(e){var t=this;this._attribute=o({},e),Object.keys(e).forEach((function(r){("_"===r[0]||p.includes(r))&&(t[r]=e[r])}))}},{key:"toJSON",value:function(){return this._attribute}},{key:"get",value:function(e){return this._attribute[e]}},{key:"linkWechat",value:function(){return this._anonymous?Promise.reject(new f(612)):l._polyfill.linkWechat?l._polyfill.linkWechat.apply(null,arguments):Promise.reject(new f(605,"linkWechat ÊñπÊ≥ïÊú™ÂÆö‰πâ"))}},{key:"linkAlipay",value:function(){return this._anonymous?Promise.reject(new f(612)):l._polyfill.linkAlipay?l._polyfill.linkAlipay.apply(null,arguments):Promise.reject(new f(605,"linkAlipay ÊñπÊ≥ïÊú™ÂÆö‰πâ"))}},{key:"linkQQ",value:function(){return this._anonymous?Promise.reject(new f(612)):l._polyfill.linkQQ?l._polyfill.linkQQ.apply(null,arguments):Promise.reject(new f(605,"linkQQ ÊñπÊ≥ïÊú™ÂÆö‰πâ"))}},{key:"linkBaidu",value:function(){return this._anonymous?Promise.reject(new f(612)):l._polyfill.linkBaidu?l._polyfill.linkBaidu.apply(null,arguments):Promise.reject(new f(605,"linkBaidu ÊñπÊ≥ïÊú™ÂÆö‰πâ"))}},{key:"linkTt",value:function(){return this._anonymous?Promise.reject(new f(612)):l._polyfill.linkTt?l._polyfill.linkTt.apply(null,arguments):Promise.reject(new f(605,"linkTt ÊñπÊ≥ïÊú™ÂÆö‰πâ"))}},{key:"linkJd",value:function(){return this._anonymous?Promise.reject(new f(612)):l._polyfill.linkJd?l._polyfill.linkJd.apply(null,arguments):Promise.reject(new f(605,"linkJd ÊñπÊ≥ïÊú™ÂÆö‰πâ"))}},{key:"linkKs",value:function(){return this._anonymous?Promise.reject(new f(612)):l._polyfill.linkKs?l._polyfill.linkKs.apply(null,arguments):Promise.reject(new f(605,"linkKs ÊñπÊ≥ïÊú™ÂÆö‰πâ"))}},{key:"linkThirdParty",value:function(){return this._anonymous?Promise.reject(new f(612)):l._polyfill.linkThirdParty?l._polyfill.linkThirdParty.apply(null,arguments):Promise.reject(new f(605,"linkThirdParty ÊñπÊ≥ïÊú™ÂÆö‰πâ"))}},{key:"linkThirdPartyWithAuthData",value:function(){return this._anonymous?Promise.reject(new f(612)):l._polyfill.linkThirdPartyWithAuthData?l._polyfill.linkThirdPartyWithAuthData.apply(null,arguments):Promise.reject(new f(605,"linkThirdPartyWithAuthData ÊñπÊ≥ïÊú™ÂÆö‰πâ"))}},{key:"updatePassword",value:function(e){var t=this,r=e.password,n=e.newPassword;return this._anonymous?Promise.reject(new f(612)):l._baasRequest({url:h.ACCOUNT_INFO,method:"PUT",data:{password:r,new_password:n}}).then((function(){return t}))}},{key:"setEmail",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.sendVerificationEmail,o=void 0!==n&&n;return this._anonymous?Promise.reject(new f(612)):l._baasRequest({url:h.ACCOUNT_INFO,method:"PUT",data:{email:e}}).then((function(r){return o&&t.requestEmailVerification(e),t.initAttribute(r.data),t}))}},{key:"setUsername",value:function(e){var t=this;return this._anonymous?Promise.reject(new f(612)):l._baasRequest({url:h.ACCOUNT_INFO,method:"PUT",data:{username:e}}).then((function(e){return t.initAttribute(e.data),t}))}},{key:"requestEmailVerification",value:function(){var e=this;return this._anonymous?Promise.reject(new f(612)):l._baasRequest({url:h.EMAIL_VERIFY,method:"POST"}).then((function(){return e}))}},{key:"setAccount",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._anonymous?Promise.reject(new f(612)):(t.password&&(t.new_password=t.password,delete t.password),l._baasRequest({url:h.ACCOUNT_INFO,method:"PUT",data:t}).then((function(t){return e.initAttribute(t.data),e})))}},{key:"setMobilePhone",value:function(e){var t=this;return this._anonymous?Promise.reject(new f(612)):l._baasRequest({url:h.ACCOUNT_INFO,method:"PUT",data:{phone:e}}).then((function(e){return t.initAttribute(e.data),t}))}},{key:"verifyMobilePhone",value:function(e){var t=this;return this._anonymous?Promise.reject(new f(612)):l._baasRequest({url:h.VERIFY_MOBILE,method:"POST",data:{code:e}}).then((function(){return t}))}}])&&i(r.prototype,n),c&&i(r,c),t}(c);e.exports=d},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=r(0),l=r(4),f=r(5),_=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=s(this,a(t).call(this)))._contentGroupID=e,r}var r,n,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,e),r=t,l=[{key:"get",value:function(e){return c.getContentGroup({contentGroupID:e})}},{key:"find",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.offset,r=void 0===t?0:t,n=e.limit,o=void 0===n?20:n,i=e.withCount,s=void 0!==i&&i;return c.getContentGroupList({offset:r,limit:o,return_total_count:s?1:0})}}],(n=[{key:"getContent",value:function(e){var t={richTextID:e};return this._expand&&(t.expand=this._expand),this._keys&&(t.keys=this._keys),this._initQueryParams(),c.getContent(t)}},{key:"find",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.withCount,r=void 0!==t&&t,n=this._handleAllQueryConditions();return n.contentGroupID=this._contentGroupID,this._initQueryParams(),c.getContentListV2(o({},n,{return_total_count:r?1:0}))}},{key:"count",value:function(){return this.limit(1).find({withCount:!0}).then((function(e){return e.data.meta.total_count}))}},{key:"getCategoryList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.withCount,r=void 0!==t&&t;return c.getContentCategoryList({contentGroupID:this._contentGroupID,limit:100,return_total_count:r?1:0})}},{key:"getCategory",value:function(e){var t=new f;return t.compare("group_id","=",this._contentGroupID),c.getContentCategory({categoryID:e,where:JSON.stringify(t.queryObject)})}}])&&i(r.prototype,n),l&&i(r,l),t}(l);e.exports=_},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=r(0),l=r(4),f=c._config.API,_=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,a(t).call(this))}var r,n,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,e),r=t,(n=[{key:"upload",value:function(e,t){return c.uploadFile(e,t,"json")}},{key:"delete",value:function(e){return e instanceof Array?c.deleteFiles({id__in:e}):c.deleteFile({fileID:e})}},{key:"get",value:function(e){return c.getFileDetail({fileID:e})}},{key:"find",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.withCount,r=void 0!==t&&t,n=this._handleAllQueryConditions();return this._initQueryParams(),c.getFileList(o({},n,{return_total_count:r?1:0}))}},{key:"count",value:function(){return this.limit(1).find({withCount:!0}).then((function(e){return e.data.meta.total_count}))}},{key:"genVideoSnapshot",value:function(e){return c._baasRequest({url:f.VIDEO_SNAPSHOT,method:"POST",data:e}).then((function(e){return e.data}))}},{key:"videoConcat",value:function(e){return c._baasRequest({url:f.M3U8_CONCAT,method:"POST",data:e}).then((function(e){return e.data}))}},{key:"videoClip",value:function(e){return c._baasRequest({url:f.M3U8_CLIP,method:"POST",data:e}).then((function(e){return e.data}))}},{key:"videoMeta",value:function(e){return c._baasRequest({url:f.M3U8_META,method:"POST",data:e}).then((function(e){return e.data}))}},{key:"videoAudioMeta",value:function(e){return c._baasRequest({url:f.VIDEO_AUDIO_META,method:"POST",data:e}).then((function(e){return e.data}))}}])&&i(r.prototype,n),l&&i(r,l),t}(l);e.exports=_},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=r(0),l=r(4),f=r(5),_=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,a(t).call(this))}var r,n,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,e),r=t,(n=[{key:"get",value:function(e){return c.getFileCategoryDetail({categoryID:e})}},{key:"getFileList",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.withCount,n=void 0!==r&&r,o=new f;return o.in("category_id",[e]),c.getFileList({where:JSON.stringify(o.queryObject),return_total_count:n?1:0})}},{key:"find",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.withCount,r=void 0!==t&&t,n=this._handleAllQueryConditions();return this._initQueryParams(),c.getFileCategoryList(o({},n,{return_total_count:r?1:0}))}},{key:"count",value:function(){return this.limit(1).find({withCount:!0}).then((function(e){return e.data.meta.total_count}))}}])&&i(r.prototype,n),l&&i(r,l),t}(l);e.exports=_},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e,t,r){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var l=r(0),f=r(4),_=r(3),p=r(5),h=r(43),d=r(1),y=r(8),v=r(44),g=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=s(this,u(t).call(this)))._tableID=e,r}var r,n,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),r=t,(n=[{key:"create",value:function(){return new h(this._tableID)}},{key:"createMany",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.enableTrigger,n=void 0===r||r,o=y._serializeValueFuncFactory(["BaseRecord"]);if(d.isArray(e)){var i={tableID:this._tableID,data:e.map((function(e){return Object.keys(e).forEach((function(t){e[t]=o(e[t])})),e})),enable_trigger:n?1:0};return l.createRecordList(i)}throw new _(605)}},{key:"delete",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.enableTrigger,n=void 0===r||r,o=t.withCount,i=void 0!==o&&o;if(d.isString(e)||Number.isInteger(e))return l.deleteRecord({tableID:this._tableID,recordID:e});if(e instanceof p){var s={tableID:this._tableID,limit:d.getLimitationWithEnableTigger(this._limit,n),offset:this._offset,where:JSON.stringify(e.queryObject),enable_trigger:n?1:0,return_total_count:i?1:0};return this._initQueryParams(),l.deleteRecordList(s)}throw new _(605)}},{key:"getWithoutData",value:function(e){if(d.isString(e)&&""!==e.trim()||Number.isInteger(e))return new h(this._tableID,e);if(e instanceof p){var t={};return t.limit=this._limit,t.offset=this._offset,t.where=d.cloneDeep(e.queryObject),this._initQueryParams(),new h(this._tableID,null,t)}throw new _(605)}},{key:"get",value:function(e){var t={tableID:this._tableID,recordID:e};return this._expand&&(t.expand=this._expand),this._keys&&(t.keys=this._keys),this._initQueryParams(),l.getRecord(t)}},{key:"_handleAllQueryConditions",value:function(){var e=a(u(t.prototype),"_handleAllQueryConditions",this).call(this);return e.tableID=this._tableID,e}},{key:"find",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.withCount,r=void 0!==t&&t,n=this._handleAllQueryConditions();return this._initQueryParams(),l.queryRecordList(o({},n,{return_total_count:r?1:0}))}},{key:"count",value:function(){return this.limit(1).find({withCount:!0}).then((function(e){return e.data.meta.total_count}))}},{key:"subscribe",value:function(e,t){var r=t.onerror,n=t.oninit,o=t.onevent;return v.subscribe({schema_name:this._tableID,where:this._queryObject,event_type:e,onerror:r,oninit:n,onevent:o})}}])&&i(r.prototype,n),f&&i(r,f),t}(f);e.exports=g},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u=r(0),c=r(8),l=r(1),f=function(e){function t(e,r){var n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=i(this,s(t).call(this,r)))._tableID=e,n._queryObject=o,n}var r,n,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(t,e),r=t,(n=[{key:"save",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.expand,r=void 0===t?"":t,n=l.cloneDeep(this._record);return this._recordValueInit(),u.createRecord({tableID:this._tableID,data:n.$set,expand:Array.isArray(r)?r.join(","):r})}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.enableTrigger,r=void 0===t||t,n=e.withCount,o=void 0!==n&&n,i=e.expand,s=void 0===i?"":i,a=l.cloneDeep(this._record);if(this._recordValueInit(),null!=this._recordID)return u.updateRecord({tableID:this._tableID,recordID:this._recordID,data:a,enable_trigger:r?1:0,expand:Array.isArray(s)?s.join(","):s});var c={tableID:this._tableID,data:a,where:JSON.stringify(this._queryObject.where),limit:l.getLimitationWithEnableTigger(this._queryObject.limit,r),offset:this._queryObject.offset,enable_trigger:r?1:0,return_total_count:o?1:0};return this._queryObject={},u.updateRecordList(c)}}])&&o(r.prototype,n),c&&o(r,c),t}(c);e.exports=f},function(e,t,r){var n=r(0),o=r(3),i=r(45);function s(e){var t=e.schema_name,r=e.event_type;return"".concat(n._config.WS_BASE_TOPIC,".").concat(t,".on_").concat(r)}function a(e){var t=e.where;return t?{where:t}:{}}function u(){return!1}function c(e){var t={unreachable:601,"wamp.error.not_authorized":603};return function(r){var n=r.message,i=r.reason,s=r.details;s&&s.reason&&(i=s.reason),s&&s.message&&(n=s.message),!n&&i&&(n=i);var a=new o(t[i]||0,n);a.reason=i,a.details=s,e(a)}}function l(){var e=[];return e.push("x-hydrogen-client-id=".concat(n._config.CLIENT_ID)),n._config.ENV&&e.push("x-hydrogen-env-id=".concat(n._config.ENV)),n.getAuthToken().then((function(t){return t&&e.push("authorization=".concat(encodeURIComponent(n._config.AUTH_PREFIX+" "+t))),e.join("&")}))}var f=null;e.exports={subscribe:function(e){var t=e.schema_name,r=e.where,o=e.event_type,_=e.onerror,p=e.oninit,h=e.onevent;if(!f){var d=n._polyfill.getWSHost().replace(/\/$/,"")+"/"+n._config.WS_PATH;f=i({WebSocket:n._polyfill.WebSocket,url:d,realm:n._config.WS_REALM,resolveOptions:a,resolveTopic:s,getAuthTokenQuerystring:l,shouldTryAgain:u})}return p=p||function(){},h=h||function(){},f({schema_name:t,where:r,event_type:o,onerror:c(_=_||function(){}),oninit:p,onevent:h})}}},function(e,t,r){function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(o)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var o=r(46).Connection,i=r(48).transporter,s=r(6);e.exports=function(e){var t=e.WebSocket,r=e.getAuthTokenQuerystring,a=e.realm,u=e.resolveOptions,c=e.resolveTopic,l=e.url,f=e.shouldTryAgain,_=i(t),p=null,h=new Map,d={retried:!1},y=function(){p&&p.isOpen&&p.close(),h.clear()},v=function(e){0===h.size?y():e&&!1===e.will_retry&&y()},g=function(e){var t=h.get(e);t&&p.session.subscribe(t.topic,(function(e,r){return t.onevent(r)}),t.options).then((function(r){t.subscription=r,h.set(e,t),t.oninit()})).catch((function(r){t.onerror(r),h.delete(e),v()}))},b=function(){d.retried=!1,function(){var e=!0,t=!1,r=void 0;try{for(var o,i=h[Symbol.iterator]();!(e=(o=i.next()).done);e=!0){var s=n(o.value,1)[0];g(s)}}catch(e){t=!0,r=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw r}}}()},E=function(e,t){var r=!0,n=!1,o=void 0;try{for(var i,s=h.values()[Symbol.iterator]();!(r=(i=s.next()).done);r=!0){i.value.onerror({reason:e,details:t})}}catch(e){n=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(n)throw o}}v(t)},m=s.asyncCache((function(){return p||(p=new o({url:l,realm:a,create_transport:_,getAuthTokenQuerystring:r,shouldTryAgain:f,state:d})),p.isOpen?Promise.resolve():new Promise((function(e,t){p.onopen=function(){d.retried=!1,e(),p.onopen=b,p.onclose=E},p.onclose=function(e,r){var n=new Error(e);n.reason=e,n.details=r,t(n),p.onopen=b,p.onclose=E},p.open()}))}));return function(e){var t=e.schema_name,r=e.where,n=e.event_type,o=e.onerror,i=e.oninit,a=e.onevent,l=c({schema_name:t,event_type:n}),f=u({where:r})||{},_=s.generateKey();h.set(_,{key:_,topic:l,options:f,onerror:o,oninit:i,onevent:a});return m().then((function(){g(_)})).catch(o),{unsubscribe:function(){var e=h.get(_);return e?e.subscription?p?p.session.unsubscribe(e.subscription).then((function(){h.delete(_),v()})):Promise.resolve():(h.delete(_),v(),Promise.resolve()):Promise.resolve()}}}}},function(e,t,r){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=r(47).Session,i=r(6),s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i.assert(void 0!==t.url,"options.url missing"),i.assert(void 0!==t.create_transport,"create_transport missing"),i.assert("function"==typeof t.create_transport,"create_transport must be a function"),i.assert(void 0!==t.getAuthTokenQuerystring,"getAuthTokenQuerystring missing"),i.assert("function"==typeof t.getAuthTokenQuerystring,"getAuthTokenQuerystring must be a function"),this._options=t,this._create_transport=this._options.create_transport,this._getAuthTokenQuerystring=this._options.getAuthTokenQuerystring,this._shouldTryAgain=this._options.shouldTryAgain||function(){return!1},this._defer=i.deferred_factory(),this._session=null,this._session_close_reason=null,this._session_close_message=null,this._retry_if_unreachable=i.opt(this._options.retry_if_unreachable,!0),this._max_retries=i.opt(this._options.max_retries,15),this._initial_retry_delay=i.opt(this._options.initial_retry_delay,1.5),this._max_retry_delay=this._options.max_retry_delay||300,this._retry_delay_growth=this._options.retry_delay_growth||1.5,this._retry_delay_jitter=this._options.retry_delay_jitter||.1,this._connect_successes=0,this._retry=!1,this._retry_count=0,this._retry_delay=this._initial_retry_delay,this._is_retrying=!1,this._retry_timer=null}var t,r,s;return t=e,(r=[{key:"_autoreconnect_reset_timer",value:function(){clearTimeout(this._retry_timer),this._retry_timer=null}},{key:"_autoreconnect_reset",value:function(){this._autoreconnect_reset_timer(),this._retry_count=0,this._retry_delay=this._initial_retry_delay,this._is_retrying=!1}},{key:"_autoreconnect_advance",value:function(){var e;return this._retry_delay_jitter&&(this._retry_delay_jitter=i.rand_normal(this._retry_delay,this._retry_delay*this._retry_delay_jitter)),this._retry_delay>this._max_retry_delay&&(this._retry_delay=this._max_retry_delay),this._retry_count+=1,e=this._retry&&(-1===this._max_retries||this._retry_count<=this._max_retries)?{count:this._retry_count,delay:this._retry_delay,will_retry:!0}:{count:null,delay:null,will_retry:!1},this._retry_delay_growth&&(this._retry_delay=this._retry_delay*this._retry_delay_growth),e}},{key:"open",value:function(){var e=this;if(this._transport)throw new Error("connection already open (or opening)");this._autoreconnect_reset(),this._retry=!0;var t=function(t){try{e._transport=e._create_transport({url:e._options.url+"?"+t})}catch(t){i.handle_error(e._options.on_internal_error,t)}e._transport?(e._session=new o(e._transport,e._defer,e._options.onchallenge,e._options.on_user_error,e._options.on_internal_error),e._session_close_reason=null,e._session_close_message=null,e._transport.onopen=function(){e._options.state.retried||e._autoreconnect_reset(),e._connect_successes+=1,e._session.join(e._options.realm,e._options.authmethods,e._options.authid,e._options.authextra)},e._session.onjoin=function(t){if(e.onopen)try{t.transport=e._transport.info,e.onopen(e._session,t)}catch(t){i.handle_error(e._options.on_user_error,t,"exception raised from app code while firing Connection.onopen()")}},e._session.onleave=function(t,r){e._session_close_reason=t,e._session_close_message=r.message||"",e._shouldTryAgain(t)?e._options.state.retried=!0:e._retry=!1,e._transport.close(),e.onabort&&e.onabort(t,r)},e._transport.onclose=function(t){e._autoreconnect_reset_timer(),e._transport=null;var n=null;0===e._connect_successes?(n="unreachable",e._retry_if_unreachable||(e._retry=!1)):n=t.wasClean?"closed":"lost";var o,s=e._autoreconnect_advance(),a={reason:e._session_close_reason,message:e._session_close_message,retry_delay:s.delay,retry_count:s.count,will_retry:s.will_retry};if(i.warn("connection closed",n,a),e.onclose)try{o=e.onclose(n,a)}catch(t){i.handle_error(e._options.on_user_error,t,"exception raised from app code while firing Connection.onclose()")}e._session&&(e._session._id=null,e._session=null,e._session_close_reason=null,e._session_close_message=null),e._retry&&!o?s.will_retry?(e._is_retrying=!0,i.warn("auto-reconnecting in "+s.delay+"s .."),e._retry_timer=setTimeout((function(){return r()}),1e3*s.delay)):i.warn("giving up trying to auto-reconnect!"):i.warn("auto-reconnect disabled!",e._retry,o)}):(e._retry=!1,e.onclose&&e.onclose("unsupported",{reason:null,message:null,retry_delay:null,retry_count:null,will_retry:!1}))},r=function(){e._getAuthTokenQuerystring().then((function(e){t(e)})).catch((function(t){i.handle_error(e._options.on_internal_error,t)}))};r()}},{key:"close",value:function(e,t){if(!this._transport&&!this._is_retrying)throw new Error("connection already closed");this._retry=!1,this._session&&this._session.isOpen?this._session.leave(e,t):this._transport&&this._transport.close()}},{key:"defer",get:function(){return this._defer}},{key:"session",get:function(){return this._session}},{key:"isOpen",get:function(){return!(!this._session||!this._session.isOpen)}},{key:"isConnected",get:function(){return!!this._transport}},{key:"transport",get:function(){return this._transport?this._transport:{info:{type:"none",url:null,protocal:null}}}},{key:"isRetrying",get:function(){return this._is_retrying}}])&&n(t.prototype,r),s&&n(t,s),e}();e.exports={Connection:s}},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=r(6),i={caller:{features:{caller_identification:!0,call_canceling:!0,progressive_call_results:!0}},callee:{features:{caller_identification:!0,pattern_based_registration:!0,shared_registration:!0,progressive_call_results:!0,registration_revocation:!0}},publisher:{features:{publisher_identification:!0,subscriber_blackwhite_listing:!0,publisher_exclusion:!0}},subscriber:{features:{publisher_identification:!0,pattern_based_subscription:!0,subscription_revocation:!0}}},s=function(e,t,r,n,o){this.procedure=e,this.progress=t,this.caller=r,this.caller_authid=n,this.caller_authrole=o},a=function(e,t,r,n,o,i,s){this.publication=e,this.topic=t,this.publisher=r,this.publisher_authid=n,this.publisher_authrole=o,this.retained=i,this.forward_for=s},u=function(e,t){this.args=e||[],this.kwargs=t||{}},c=function(e,t,r){this.error=e,this.args=t||[],this.kwargs=r||{}},l=function(e,t,r,n,o){this.topic=e,this.handler=t,this.options=r||{},this.session=n,this.id=o,this.active=!0,this._on_unsubscribe=n._defer(),this._on_unsubscribe.promise.then?this.on_unsubscribe=this._on_unsubscribe.promise:this.on_unsubscribe=this._on_unsubscribe};l.prototype.unsubscribe=function(){return this.session.unsubscribe(this)};var f=function(e,t,r,n,o){this.procedure=e,this.endpoint=t,this.options=r||{},this.session=n,this.id=o,this.active=!0,this._on_unregister=n._defer(),this._on_unregister.promise.then?this.on_unregister=this._on_unregister.promise:this.on_unregister=this._on_unregister};f.prototype.unregister=function(){return this.session.unregister(this)};var _=function(e){this.id=e},p=1,h=2,d=3,y=4,v=5,g=6,b=8,E=16,m=17,w=32,O=33,S=34,T=35,A=36,R=48,I=49,P=50,D=64,L=65,C=66,k=67,U=68,N=70,j=function(e,t,r,p,I){var j=this;j._socket=e,j._defer=t,j._onchallenge=r,j._on_user_error=p,j._on_internal_error=I,j._id=null,j._realm=null,j._features=null,j._goodbye_sent=!1,j._transport_is_closing=!1,j._publish_reqs={},j._subscribe_reqs={},j._unsubscribe_reqs={},j._call_reqs={},j._register_reqs={},j._unregister_reqs={},j._subscriptions={},j._registrations={},j._invocations={},j._prefixes={},j._caller_disclose_me=!1,j._publisher_disclose_me=!1,j._send_wamp=function(e){o.debug(e),j._socket.send(e)},j._protocol_violation=function(e){j._socket.close(3002,"protocol violation: "+e),o.handle_error(j._on_internal_error,c("failing transport due to protocol violation: "+e))},j._MESSAGE_MAP={},j._MESSAGE_MAP[b]={};var x=0;j._new_request_id=function(){return x<9007199254740992?x+=1:x=1,x},j._process_SUBSCRIBED=function(e){var t=e[1],r=e[2];if(t in j._subscribe_reqs){var n=j._subscribe_reqs[t],o=n[0],i=n[1],s=n[2],a=n[3];r in j._subscriptions||(j._subscriptions[r]=[]);var u=new l(i,s,a,j,r);j._subscriptions[r].push(u),o.resolve(u),delete j._subscribe_reqs[t]}else j._protocol_violation("SUBSCRIBED received for non-pending request ID "+t)},j._MESSAGE_MAP[O]=j._process_SUBSCRIBED,j._process_SUBSCRIBE_ERROR=function(e){var t=e[2];if(t in j._subscribe_reqs){var r=e[3],n=new c(e[4],e[5],e[6]);n.reason=e[4],n.details=r,j._subscribe_reqs[t][0].reject(n),delete j._subscribe_reqs[t]}else j._protocol_violation("SUBSCRIBE-ERROR received for non-pending request ID "+t)},j._MESSAGE_MAP[b][w]=j._process_SUBSCRIBE_ERROR,j._process_UNSUBSCRIBED=function(e){var t=e[1];if(t in j._unsubscribe_reqs){var r=j._unsubscribe_reqs[t],n=r[0],o=r[1];if(o in j._subscriptions){for(var i=j._subscriptions[o],s=0;s<i.length;++s)i[s].active=!1,i[s]._on_unsubscribe.resolve();delete j._subscriptions[o]}n.resolve(!0),delete j._unsubscribe_reqs[t]}else if(0===t){var a=e[2],u=a.subscription,c=a.reason;if(u in j._subscriptions){for(var l=j._subscriptions[u],f=0;f<l.length;++f)l[f].active=!1,l[f]._on_unsubscribe.resolve(c);delete j._subscriptions[u]}else j._protocol_violation("non-voluntary UNSUBSCRIBED received for non-existing subscription ID "+u)}else j._protocol_violation("UNSUBSCRIBED received for non-pending request ID "+t)},j._MESSAGE_MAP[T]=j._process_UNSUBSCRIBED,j._process_UNSUBSCRIBE_ERROR=function(e){var t=e[2];if(t in j._unsubscribe_reqs){var r=e[3],n=new c(e[4],e[5],e[6]);n.reason=e[4],n.details=r,j._unsubscribe_reqs[t][0].reject(n),delete j._unsubscribe_reqs[t]}else j._protocol_violation("UNSUBSCRIBE-ERROR received for non-pending request ID "+t)},j._MESSAGE_MAP[b][S]=j._process_UNSUBSCRIBE_ERROR,j._process_PUBLISHED=function(e){var t=e[1],r=e[2];if(t in j._publish_reqs){var n=j._publish_reqs[t][0],o=new _(r);n.resolve(o),delete j._publish_reqs[t]}else j._protocol_violation("PUBLISHED received for non-pending request ID "+t)},j._MESSAGE_MAP[m]=j._process_PUBLISHED,j._process_PUBLISH_ERROR=function(e){var t=e[2];if(t in j._publish_reqs){var r=new c(e[4],e[5],e[6]);j._publish_reqs[t][0].reject(r),delete j._publish_reqs[t]}else j._protocol_violation("PUBLISH-ERROR received for non-pending request ID "+t)},j._MESSAGE_MAP[b][E]=j._process_PUBLISH_ERROR,j._process_EVENT=function(e){var t=e[1];if(t in j._subscriptions)for(var r=e[2],n=e[3],i=e[4]||[],s=e[5]||{},u=j._subscriptions[t],c=new a(r,n.topic||u[0]&&u[0].topic,n.publisher,n.publisher_authid,n.publisher_authrole,n.retained||!1,n.forward_for),l=0;l<u.length;++l){var f=u[l];try{f.handler(i,s,c,f)}catch(e){o.handle_error(j._on_user_error,e,"Exception raised in event handler:")}}else j._protocol_violation("EVENT received for non-subscribed subscription ID "+t)},j._MESSAGE_MAP[A]=j._process_EVENT,j._process_REGISTERED=function(e){var t=e[1],r=e[2];if(t in j._register_reqs){var n=j._register_reqs[t],o=n[0],i=n[1],s=n[2],a=n[3],u=new f(i,s,a,j,r);j._registrations[r]=u,o.resolve(u),delete j._register_reqs[t]}else j._protocol_violation("REGISTERED received for non-pending request ID "+t)},j._MESSAGE_MAP[L]=j._process_REGISTERED,j._process_REGISTER_ERROR=function(e){var t=e[2];if(t in j._register_reqs){var r=new c(e[4],e[5],e[6]);j._register_reqs[t][0].reject(r),delete j._register_reqs[t]}else j._protocol_violation("REGISTER-ERROR received for non-pending request ID "+t)},j._MESSAGE_MAP[b][D]=j._process_REGISTER_ERROR,j._process_UNREGISTERED=function(e){var t=e[1];if(t in j._unregister_reqs){var r=j._unregister_reqs[t],n=r[0],o=r[1];o.id in j._registrations&&delete j._registrations[o.id],o.active=!1,n.resolve(),delete j._unregister_reqs[t]}else if(0===t){var i=e[2],s=i.registration,a=i.reason;if(s in j._registrations){var u=j._registrations[s];u.active=!1,u._on_unregister.resolve(a),delete j._registrations[s]}else j._protocol_violation("non-voluntary UNREGISTERED received for non-existing registration ID "+s)}else j._protocol_violation("UNREGISTERED received for non-pending request ID "+t)},j._MESSAGE_MAP[k]=j._process_UNREGISTERED,j._process_UNREGISTER_ERROR=function(e){var t=e[2];if(t in j._unregister_reqs){var r=new c(e[4],e[5],e[6]);j._unregister_reqs[t][0].reject(r),delete j._unregister_reqs[t]}else j._protocol_violation("UNREGISTER-ERROR received for non-pending request ID "+t)},j._MESSAGE_MAP[b][C]=j._process_UNREGISTER_ERROR,j._process_RESULT=function(e){var t=e[1];if(t in j._call_reqs){var r=e[2],n=e[3]||[],o=e[4]||{},i=null;n.length>1||Object.keys(o).length>0?i=new u(n,o):n.length>0&&(i=n[0]);var s=j._call_reqs[t],a=s[0],c=s[1];r.progress?c&&c.receive_progress&&a.notify(i):(a.resolve(i),delete j._call_reqs[t])}else j._protocol_violation("CALL-RESULT received for non-pending request ID "+t)},j._MESSAGE_MAP[P]=j._process_RESULT,j._process_CALL_ERROR=function(e){var t=e[2];if(t in j._call_reqs){var r=new c(e[4],e[5],e[6]);j._call_reqs[t][0].reject(r),delete j._call_reqs[t]}else j._protocol_violation("CALL-ERROR received for non-pending request ID "+t)},j._MESSAGE_MAP[b][R]=j._process_CALL_ERROR,j._process_INVOCATION=function(e){var t=e[1],r=e[2],n=e[3];if(r in j._registrations){var i=j._registrations[r],a=e[4]||[],l=e[5]||{},f=null;n.receive_progress&&(f=function(e,r){var n=[N,t,{progress:!0}];e=e||[],r=r||{};var o=Object.keys(r).length;(e.length||o)&&(n.push(e),o&&n.push(r)),j._send_wamp(n)});var _=new s(n.procedure||i.procedure,f,n.caller,n.caller_authid,n.caller_authrole);o.promisify(i.endpoint)(a,l,_).then((function(e){var r=[N,t,{}];if(e instanceof u){var n=Object.keys(e.kwargs).length;(e.args.length||n)&&(r.push(e.args),n&&r.push(e.kwargs))}else r.push([e]);j._send_wamp(r)}),(function(e){var r=[b,U,t,{}];if(e instanceof c){r.push(e.error);var n=Object.keys(e.kwargs).length;(e.args.length||n)&&(r.push(e.args),n&&r.push(e.kwargs))}else r.push("wamp.error.runtime_error"),r.push([e]);j._send_wamp(r),o.handle_error(j._on_user_error,e,"Exception raised in invocation handler:")}))}else j._protocol_violation("INVOCATION received for non-registered registration ID "+t)},j._MESSAGE_MAP[U]=j._process_INVOCATION,j._socket.onmessage=function(e){var t=e[0];if(j._id)if(t===g){if(!j._goodbye_sent){var r=[g,{},"wamp.error.goodbye_and_out"];j._send_wamp(r)}j._id=null,j._realm=null,j._features=null;var s=e[1],a=e[2];j.onleave&&j.onleave(a,s)}else if(t===b){var u=e[1];u in j._MESSAGE_MAP[b]?j._MESSAGE_MAP[t][u](e):j._protocol_violation("unexpected ERROR message with request_type "+u)}else t in j._MESSAGE_MAP?j._MESSAGE_MAP[t](e):j._protocol_violation("unexpected message type "+t);else if(t===h){j._id=e[1];var l=e[2];if(j._features={},l.roles.broker&&(j._features.subscriber={},j._features.publisher={},l.roles.broker.features)){for(var f in i.publisher.features)j._features.publisher[f]=i.publisher.features[f]&&l.roles.broker.features[f];for(var _ in i.subscriber.features)j._features.subscriber[_]=i.subscriber.features[_]&&l.roles.broker.features[_]}if(l.roles.dealer&&(j._features.caller={},j._features.callee={},l.roles.dealer.features)){for(var p in i.caller.features)j._features.caller[p]=i.caller.features[p]&&l.roles.dealer.features[p];for(var E in i.callee.features)j._features.callee[E]=i.callee.features[E]&&l.roles.dealer.features[E]}j.onjoin&&j.onjoin(e[2])}else if(t===d){var m=e[1],w=e[2];j.onleave&&j.onleave(w,m)}else if(t===y)if(j._onchallenge){var O=e[1],S=e[2];o.promisify(j._onchallenge)(j,O,S).then((function(e){var t;if("string"==typeof e)t=[v,e,{}];else if("object"===n(e)){var r=e[0],o=e[1];t=[v,r,o]}j._send_wamp(t)}),(function(e){o.handle_error(j._on_user_error,e,"onchallenge() raised: ");var t=[d,{message:"sorry, I cannot authenticate (onchallenge handler raised an exception)"},"wamp.error.cannot_authenticate"];j._send_wamp(t),j._socket.close(3e3)}))}else{o.handle_error(j._on_internal_error,c("received WAMP challenge, but no onchallenge() handler set"));var T=[d,{message:"sorry, I cannot authenticate (no onchallenge handler set)"},"wamp.error.cannot_authenticate"];j._send_wamp(T),j._socket.close(3e3)}else j._protocol_violation("unexpected message type "+t)},o.canUse("performance")&&"now"in performance?j._created=performance.now():j._created=Date.now()};Object.defineProperty(j.prototype,"defer",{get:function(){return this._defer}}),Object.defineProperty(j.prototype,"id",{get:function(){return this._id}}),Object.defineProperty(j.prototype,"realm",{get:function(){return this._realm}}),Object.defineProperty(j.prototype,"isOpen",{get:function(){return null!==this.id}}),Object.defineProperty(j.prototype,"features",{get:function(){return this._features}}),Object.defineProperty(j.prototype,"caller_disclose_me",{get:function(){return this._caller_disclose_me},set:function(e){this._caller_disclose_me=e}}),Object.defineProperty(j.prototype,"publisher_disclose_me",{get:function(){return this._publisher_disclose_me},set:function(e){this._publisher_disclose_me=e}}),Object.defineProperty(j.prototype,"subscriptions",{get:function(){for(var e=Object.keys(this._subscriptions),t=[],r=0;r<e.length;++r)t.push(this._subscriptions[e[r]]);return t}}),Object.defineProperty(j.prototype,"registrations",{get:function(){for(var e=Object.keys(this._registrations),t=[],r=0;r<e.length;++r)t.push(this._registrations[e[r]]);return t}}),j.prototype.log=function(){},j.prototype.join=function(e,t,r,n){o.assert(!e||"string"==typeof e,"Session.join: <realm> must be a string"),o.assert(!t||Array.isArray(t),"Session.join: <authmethods> must be an array []"),o.assert(!r||"string"==typeof r,"Session.join: <authid> must be a string");if(this.isOpen)throw"session already open";this._goodbye_sent=!1,this._realm=e;var s={};s.roles=i,t&&(s.authmethods=t),r&&(s.authid=r),n&&(s.authextra=n);var a=[p,e,s];this._send_wamp(a)},j.prototype.leave=function(e,t){o.assert(!e||"string"==typeof e,"Session.leave: <reason> must be a string"),o.assert(!t||"string"==typeof t,"Session.leave: <message> must be a string");if(!this.isOpen)throw"session not open";e||(e="wamp.close.normal");var r={};t&&(r.message=t);var n=[g,r,e];this._send_wamp(n),this._goodbye_sent=!0},j.prototype.call=function(e,t,r,n){o.assert("string"==typeof e,"Session.call: <procedure> must be a string"),o.assert(!t||Array.isArray(t),"Session.call: <args> must be an array []"),o.assert(!r||o.is_object(r),"Session.call: <kwargs> must be an object {}"),o.assert(!n||o.is_object(n),"Session.call: <options> must be an object {}");var i=this;if(!i.isOpen)throw"session not open";void 0===(n=n||{}).disclose_me&&i._caller_disclose_me&&(n.disclose_me=!0);var s=i._defer(),a=i._new_request_id();i._call_reqs[a]=[s,n];var u,l=[R,a,n,i.resolve(e)];return t?(l.push(t),r&&l.push(r)):r&&(l.push([]),l.push(r)),i._send_wamp(l),(u=s.promise.then?s.promise:s).cancel=function(e){var t=[I,a,e||{}];(i._send_wamp(t),!(a in i._call_reqs)||e&&e.mode&&"kill"===e.mode)||(i._call_reqs[a][0].reject(new c("Cancelled")),delete i._call_reqs[a])},u},j.prototype.publish=function(e,t,r,n){o.assert("string"==typeof e,"Session.publish: <topic> must be a string"),o.assert(!t||Array.isArray(t),"Session.publish: <args> must be an array []"),o.assert(!r||o.is_object(r),"Session.publish: <kwargs> must be an object {}"),o.assert(!n||o.is_object(n),"Session.publish: <options> must be an object {}");if(!this.isOpen)throw"session not open";void 0===(n=n||{}).disclose_me&&this._publisher_disclose_me&&(n.disclose_me=!0);var i=null,s=this._new_request_id();n.acknowledge&&(i=this._defer(),this._publish_reqs[s]=[i,n]);var a=[E,s,n,this.resolve(e)];if(t?(a.push(t),r&&a.push(r)):r&&(a.push([]),a.push(r)),this._send_wamp(a),i)return i.promise.then?i.promise:i},j.prototype.subscribe=function(e,t,r){o.assert("string"==typeof e,"Session.subscribe: <topic> must be a string"),o.assert("function"==typeof t,"Session.subscribe: <handler> must be a function"),o.assert(!r||o.is_object(r),"Session.subscribe: <options> must be an object {}");if(!this.isOpen)throw"session not open";var n=this._new_request_id(),i=this._defer();this._subscribe_reqs[n]=[i,e,t,r];var s=[w,n];return r?s.push(r):s.push({}),s.push(this.resolve(e)),this._send_wamp(s),i.promise.then?i.promise:i},j.prototype.register=function(e,t,r){o.assert("string"==typeof e,"Session.register: <procedure> must be a string"),o.assert("function"==typeof t,"Session.register: <endpoint> must be a function"),o.assert(!r||o.is_object(r),"Session.register: <options> must be an object {}");if(!this.isOpen)throw"session not open";var n=this._new_request_id(),i=this._defer();this._register_reqs[n]=[i,e,t,r];var s=[D,n];return r?s.push(r):s.push({}),s.push(this.resolve(e)),this._send_wamp(s),i.promise.then?i.promise:i},j.prototype.unsubscribe=function(e){o.assert(e instanceof l,"Session.unsubscribe: <subscription> must be an instance of class autobahn.Subscription");var t=this._subscriptions[e.id],r=t.indexOf(e);if(!this.isOpen)throw-1!==r&&(t.splice(r,1),e.active=!1),"session not open";if(!(e.active&&e.id in this._subscriptions))throw-1!==r&&(t.splice(r,1),e.active=!1),"subscription not active";if(-1===r)throw"subscription not active";t.splice(r,1),e.active=!1;var n=this._defer();if(t.length)n.resolve(!1);else{var i=this._new_request_id();this._unsubscribe_reqs[i]=[n,e.id];var s=[S,i,e.id];this._send_wamp(s)}return n.promise.then?n.promise:n},j.prototype.unregister=function(e){o.assert(e instanceof f,"Session.unregister: <registration> must be an instance of class autobahn.Registration");if(!this.isOpen)throw"session not open";if(!(e.active&&e.id in this._registrations))throw"registration not active";var t=this._new_request_id(),r=this._defer();this._unregister_reqs[t]=[r,e];var n=[C,t,e.id];return this._send_wamp(n),r.promise.then?r.promise:r},j.prototype.prefix=function(e,t){o.assert("string"==typeof e,"Session.prefix: <prefix> must be a string"),o.assert(!t||"string"==typeof t,"Session.prefix: <uri> must be a string or falsy");t?this._prefixes[e]=t:e in this._prefixes&&delete this._prefixes[e]},j.prototype.resolve=function(e){o.assert("string"==typeof e,"Session.resolve: <curie> must be a string");var t=e.indexOf(":");if(t>=0){var r=e.substring(0,t);return r in this._prefixes?this._prefixes[r]+"."+e.substring(t+1):e}return e},e.exports={Session:j,Invocation:s,Event:a,Result:u,Error:c,Subscription:l,Registration:f,Publication:_}},function(e,t,r){var n=r(6),o=r(49).JSONSerializer,i=new o;e.exports={transporter:function(e){return function(t){var r=t.url,o={protocol:"wamp.2.json"};o.serializer=i,o.onmessage=function(){},o.onopen=function(){},o.onclose=function(){},o.info={type:"websocket",url:r,protocol:null};var s=new e(r,["wamp.2.json"]);return s.binaryType="arraybuffer",s.onmessage=function(e){n.debug("WebSocket#onmessage",e);var t=o.serializer.unserialize(e.data);o.onmessage(t)},s.onopen=function(){n.debug("WebSocket#onopen"),o.info.protocol=s.protocol,o.onopen()},s.onclose=function(e){n.debug("WebSocket#onclose",e);var t={code:e.code,reason:e.message,wasClean:e.wasClean};o.onclose(t)},o.send=function(e){var t=o.serializer.serialize(e);n.debug("WebSocket#send",t),s.send(t)},o.close=function(e,t){n.debug("WebSocket#close",e,t),s.close(e,t)},o}}}},function(e,t,r){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=r(6),i=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.replacer=t,this.reviver=r,this.SERIALIZER_ID="json",this.BINARY=!1}var t,r,i;return t=e,(r=[{key:"serialize",value:function(e){try{return JSON.stringify(e,this.replacer)}catch(e){throw o.warn("JSON encoding error",e),e}}},{key:"unserialize",value:function(e){try{return JSON.parse(e,this.reviver)}catch(e){throw o.warn("JSON decoding error",e),e}}}])&&n(t.prototype,r),i&&n(t,i),e}();e.exports={JSONSerializer:i}},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=r(0),l=r(1),f=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,a(t).apply(this,arguments))}var r,n,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,e),r=t,(n=[{key:"get",value:function(e){var t=c._config.API,r=l.format(t.ORDER,{transactionID:e});return c._baasRequest({url:r})}},{key:"getOrderList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=o({},this._handleAllQueryConditions(),e);return this._initQueryParams(),c.getOrderList(o(t,e))}}])&&i(r.prototype,n),f&&i(r,f),t}(r(4));e.exports=f},function(e,t,r){var n=r(0),o=r(1),i=n._config.API;e.exports=function(e){return n._baasRequest({url:o.format(i.GET_ASYNC_JOB_RESULT,{id:e})})}},function(e,t,r){var n=r(0),o=n._config.API;e.exports=function(){return n._baasRequest({url:o.SERVER_TIME})}},function(e,t,r){var n=r(0),o=r(2),i=r(1);e.exports={getUploadFileConfig:function(e,t){return t.filename=e,n._baasRequest({url:n._polyfill.getAPIHost().replace(/\/$/,"")+"/"+n._config.API.UPLOAD.replace(/^\//,""),method:"POST",data:t})},getUploadHeaders:function(){return n.getAuthToken().then((function(e){return{Authorization:o.UPLOAD.HEADER_AUTH_VALUE+e,"X-Hydrogen-Client-Version":n._config.VERSION,"X-Hydrogen-Client-Platform":i.getSysPlatform(),"X-Hydrogen-Client-ID":n._config.CLIENT_ID,"User-Agent":o.UPLOAD.UA}}))}}},,,function(e,t,r){function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(o)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var o=r(0),i=r(2),s=r(1),a=[],u=!1;e.exports={pushStats:function(e){s.log(i.LOG_LEVEL.DEBUG,"<receive-stats> ".concat(e)),a.includes(e)||(a.push(e),s.log(i.LOG_LEVEL.DEBUG,"<push-stats> ".concat(e,", [").concat(a,"]")))},reportStats:function(){return u||!a.length?Promise.resolve():Promise.all([o.storageAsync.get(i.STORAGE_KEY.AUTH_TOKEN),s.isSessionExpired()]).then((function(e){var t=n(e,2),r=t[0],c=t[1];if(r&&!c)return u=!0,s.log(i.LOG_LEVEL.DEBUG,"<report-stats> begin"),function e(){var t=a[0];s.log(i.LOG_LEVEL.DEBUG,"<report-stats> [".concat(t,"]: begin"));var r=i.PLATFORM.WECHAT;switch(o._polyfill.CLIENT_PLATFORM){case"ALIPAY":r=i.PLATFORM.ALIPAY;break;case"QQ":r=i.PLATFORM.QQ;break;case"BAIDU":r=i.PLATFORM.BAIDU;break;case"BYTEDANCE":r=i.PLATFORM.BYTEDANCE;break;default:r=i.PLATFORM.WECHAT}return o._baasRequest({url:o._config.API.TEMPLATE_MESSAGE_EVENT_REPORT,method:"POST",data:{stats_id:t,platform:r}}).then((function(){if(s.log(i.LOG_LEVEL.DEBUG,"<report-stats> [".concat(t,"]: finish")),a.shift(),a.length)return e()}))}().then((function(){s.log(i.LOG_LEVEL.DEBUG,"<report-stats> finish"),u=!1})).catch((function(e){throw s.log(i.LOG_LEVEL.DEBUG,"<report-stats> fail",e,a),u=!1,e}))}))},getQueue:function(){return a.concat()}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){var n=r(0),o=r(28),i=r(129),s=r(130),a=r(132),u=r(133),c=r(134);n._config.VERSION="v3.22.0",n.use(o),n.use(s),n.use(i),n.use(a),n.use(u),n.use(c),n.pay=r(135),n.order=r(136),n.request=r(137),n._baasRequest=r(138),n.uploadFile=r(139),n.getWXACode=r(140),n.wxDecryptData=r(141),n.wxReportTicket=r(142),n.ErrorTracker=r(143),n.wxGetUserRiskRank=r(149),n.wxCreateActivityID=r(150),n._createRequestMethod(),"undefined"!=typeof wx&&(wx.BaaS=n),e.exports=n},function(e,t,r){function n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){o(e,t,r[t])}))}return e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(o)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var a=r(2),u=r(3),c=r(7),l=r(1),f=r(20);e.exports=function(e){var t=e._polyfill,r=e._config.API,_=function(){return new Promise((function(r,n){t.wxLogin({success:function(e){r(e.code)},fail:function(){e.request.wxRequestFail(n)}})}))},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.createUser,r=void 0===t||t,n=e.withUnionID,o=void 0!==n&&n;return new Promise((function(e,t){_().then((function(n){h({code:n,createUser:r,withUnionID:o},e,t)}),t)}))},h=function(t,n,o){var i=t.code,s=t.createUser,a=t.withUnionID;return e.request({url:r.WECHAT.SILENT_LOGIN,method:"POST",data:{create_user:s,code:i,login_with_unionid:a}}).then(l.validateStatusCode).then(l.flatAuthResponse).then((function(t){e._polyfill.handleLoginSuccess(t),n(t)}),o)},d=l.rateLimit((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Promise.all([c.get(a.STORAGE_KEY.AUTH_TOKEN),l.isSessionExpired()]).then((function(e){var r=s(e,2),n=r[0],o=r[1];if(!n||o)return p.apply(void 0,t)}))})),y=function(t){if(!t||!t.detail)throw new u(603);var r=t.detail,o=r.encryptedData,l=r.iv,f=r.code,_=t.code,p=t.createUser;if(!o)return Promise.all([c.get(a.STORAGE_KEY.UID),c.get(a.STORAGE_KEY.OPENID),c.get(a.STORAGE_KEY.UNIONID)]).then((function(e){var t=s(e,3),r=t[0],n=t[1],o=t[2];return Promise.reject(i(new u(603),{id:r,openid:n,unionid:o}))}));var h=v("2.21.2");return h&&!f?Promise.reject(new u(605)):g(n({encryptedData:o,iv:l,create_user:!!p,code:_},h?{phone_code:f}:{})).then((function(t){var r=t.data,o=r.user_info,i=r.user_id,s=r.openid,a=r.unionid;return e._polyfill.handleLoginSuccess(t,!1,n({},o,{id:i,openid:s,unionid:a})),t}))},v=function(e){var r=t.getSystemInfoSync().SDKVersion;return l.compareBaseLibraryVersion(r,e)>=0},g=function(t){var n=v("2.21.2");return e.request({url:n?r.WECHAT.PHONE_LOGIN:r.WECHAT.PHONE_LOGIN_OLD,method:"POST",data:t}).then(l.validateStatusCode).then(l.flatAuthResponse)};i(e.auth,{silentLogin:d,loginWithWechat:l.rateLimit((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.code,o=void 0===r?"":r,i=t.createUser,s=void 0===i||i,a=t.withUnionID,u=void 0!==a&&a;return(e&&e.detail?y(n({},e,{code:o,createUser:s})):d({createUser:s,withUnionID:u})).then((function(e){return e?f._initCurrentUser(e.data.user_info,e.data.expired_at):f.getCurrentUser()}))})),handleUserInfo:l.rateLimit(y),updateUserInfo:l.rateLimit((function(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=o.code,s=void 0===i?"":i,c=o.syncUserProfile,_=void 0===c?a.UPDATE_USERPROFILE_VALUE.SETNX:c;if(!t||!t.userInfo)return Promise.reject(new u(603));var p=v("2.16.0");if(p&&!s)return Promise.reject(new u(605));var h=p?{rawData:t.rawData,encryptedData:t.encryptedData,signature:t.signature,iv:t.iv,code:s,update_userprofile:l.getUpdateUserProfileParam(_)}:n({},t.userInfo,{update_userprofile:l.getUpdateUserProfileParam(_)});return e.request({url:p?r.WECHAT.UPDATE_USER_INFO_UPGRADED:r.WECHAT.UPDATE_USER_INFO,method:"PUT",data:h}).then((function(e){if(!e)return f.getCurrentUser();switch(e.statusCode){case 200:return f._initCurrentUser(e.data);case 401:return Promise.reject(new u(604));case 403:return Promise.reject(new u(616));default:return Promise.reject(new u(e.statusCode))}}))})),updatePhoneNumber:l.rateLimit((function(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=o.overwrite,_=void 0===l||l,p=v("2.21.2");if(!t||!t.detail)throw new u(603);var h=t.detail,d=h.encryptedData,y=h.iv,g=h.code;if(!d)return Promise.all([c.get(a.STORAGE_KEY.UID),c.get(a.STORAGE_KEY.OPENID),c.get(a.STORAGE_KEY.UNIONID)]).then((function(e){var t=s(e,3),r=t[0],n=t[1],o=t[2];return Promise.reject(i(new u(603),{id:r,openid:n,unionid:o}))}));var b=n({encryptedData:d,iv:y,overwrite:_},p?{phone_code:g}:{});return e.request({url:p?r.WECHAT.UPDATE_PHONE:r.WECHAT.UPDATE_PHONE_OLD,method:"PUT",data:b}).then((function(e){return e?200===e.statusCode?f._initCurrentUser(e.data):401===e.statusCode?Promise.reject(new u(604)):Promise.reject(new u(e.statusCode)):f.getCurrentUser()}))})),linkWechat:l.rateLimit((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.withUnionID,o=void 0!==n&&n;return _().then((function(t){return e._baasRequest({method:"POST",url:r.WECHAT.USER_ASSOCIATE,data:{code:t,associate_with_unionid:o}})}))}))}),e.login=function(e){return!1===e?d().then((function(){return Promise.all([c.get(a.STORAGE_KEY.UID),c.get(a.STORAGE_KEY.OPENID),c.get(a.STORAGE_KEY.UNIONID),c.get(a.STORAGE_KEY.EXPIRES_AT)]).then((function(e){var t=s(e,4),r=t[0],n=t[1],i=t[2],u=t[3];return o({id:r,openid:n,unionid:i},a.STORAGE_KEY.EXPIRES_AT,u)}))})):Promise.reject(new u(605))},e.handleUserInfo=function(t){return e.auth.handleUserInfo(t).then((function(){return f.getCurrentUser()})).then((function(e){return e.toJSON()}))},e.logout=e.auth.logout}},function(e,t,r){function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var o=r(56),i=r(2),s=r(1),a=r(131);e.exports=function(e){n(e._polyfill,{wxLogin:function(){var e;return(e=wx).login.apply(e,arguments)},wxGetUserInfo:function(){var e;return(e=wx).getUserInfo.apply(e,arguments)},wxPaymentRequest:function(){var e;return(e=wx).requestPayment.apply(e,arguments)},CLIENT_PLATFORM:"WECHAT",setStorageSync:function(e,t){return s.withRetry(wx.setStorageSync)(e,t)},getStorageSync:function(e){return s.withRetry(wx.getStorageSync)(e)},setStorageAsync:function(e,t){return new Promise((function(r,n){wx.setStorage({key:e,data:t,success:r,fail:n})}))},getStorageAsync:function(e){return new Promise((function(t){wx.getStorage({key:e,success:function(e){return t(e.data)},fail:function(){return t(void 0)}})}))},getSystemInfoSync:function(){return wx.getSystemInfoSync()},linkWechat:function(){var t;return(t=e.auth).linkWechat.apply(t,arguments)},checkLatestVersion:function(){"devtools"===wx.getSystemInfoSync().platform&&e.checkVersion({platform:i.PLATFORM.WECHAT})},handleLoginSuccess:function(t,r,a){e.storage.set(i.STORAGE_KEY.UID,t.data.user_id),e.storage.set(i.STORAGE_KEY.OPENID,t.data.openid||""),e.storage.set(i.STORAGE_KEY.UNIONID,t.data.unionid||""),e.storage.set(i.STORAGE_KEY.AUTH_TOKEN,t.data.token),t.data.openid&&e.storage.set(i.STORAGE_KEY.USERINFO,n({},e.storage.get(i.STORAGE_KEY.USERINFO),a||{id:t.data.user_id,openid:t.data.openid,unionid:t.data.unionid})),e.storage.set(i.STORAGE_KEY.EXPIRES_AT,s.getExpiredAt(t.data.expires_in)),r?e.storage.set(i.STORAGE_KEY.IS_ANONYMOUS_USER,1):(e.storage.set(i.STORAGE_KEY.IS_ANONYMOUS_USER,0),o.reportStats())},WebSocket:a})}},function(e,t){function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var n,o=function(){function e(t,r){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),(n=wx.connectSocket({url:t,protocols:r})).onOpen((function(){o.onopen()})),n.onMessage((function(e){o.onmessage({data:e.data})})),n.onClose((function(e){o.onclose({code:e.code,reason:e.reason})}))}var t,o,i;return t=e,(o=[{key:"send",value:function(e){n.send({data:e})}},{key:"close",value:function(e,t){n.close({code:e,reason:t})}},{key:"onopen",value:function(){}},{key:"onclose",value:function(){}},{key:"onmessage",value:function(){}}])&&r(t.prototype,o),i&&r(t,i),e}();e.exports=o},function(e,t,r){var n=r(2),o=r(3),i=r(1);e.exports=function(e){e.wxCensorImage=function(t){return e.getAuthToken().then((function(r){return new Promise((function(o,s){var a={Authorization:n.UPLOAD.HEADER_AUTH_VALUE+r,"X-Hydrogen-Client-Version":e._config.VERSION,"X-Hydrogen-Client-Platform":i.getSysPlatform(),"X-Hydrogen-Client-ID":e._config.CLIENT_ID,"User-Agent":n.UPLOAD.UA};e._config.ENV&&(a["X-Hydrogen-Env-ID"]=e._config.ENV),wx.uploadFile({url:e._polyfill.getAPIHost()+e._config.API.WECHAT.CENSOR_IMAGE,filePath:t,name:n.UPLOAD.UPLOAD_FILE_KEY,header:a,success:function(e){var t=e.statusCode,r=e.data;if(parseInt(t)!==n.STATUS_CODE.SUCCESS)return s(e);o(JSON.parse(r))},fail:function(){e.request.wxRequestFail(s)}})}))}))},e.wxCensorText=function(t){return t&&"string"==typeof t?e._baasRequest({url:e._config.API.WECHAT.CENSOR_MSG,method:"POST",data:{content:t}}):Promise.reject(new o(605))},e.censorAsync=function(t){return e._baasRequest({url:e._config.API.WECHAT.CENSOR_ASYNC,method:"POST",data:{file_id:t}})},e.getCensorResult=function(t){return e._baasRequest({url:"".concat(e._config.API.WECHAT.CENSOR_ASYNC).concat(t,"/")})}}},function(e,t,r){function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var o=r(56);e.exports=function(e){n(e,{reportTemplateMsgAnalytics:function(e){1014==e.scene&&e.query&&e.query._H_utm_campaign&&o.pushStats(e.query._H_utm_campaign),o.reportStats()}})}},function(e,t,r){var n=r(0)._config.API;e.exports=function(e){e.subscribeMessage=function(t){return e._baasRequest({url:n.WECHAT.SUBSCRIBE_MESSAGE,method:"POST",data:t})}}},function(e,t,r){var n=r(0),o=r(3),i=n._polyfill,s=n._config.API,a={merchandiseSchemaID:"merchandise_schema_id",merchandiseRecordID:"merchandise_record_id",merchandiseSnapshot:"merchandise_snapshot",profitSharing:"profit_sharing",merchandiseDescription:"merchandise_description",totalCost:"total_cost"};e.exports=function(e,t){var r={};for(var u in e)r[a[u]]=e[u];return r.gateway_type="weixin_tenpay",n._baasRequest({url:s.PAY,method:"POST",data:r}).then((function(e){var r=e.data||{};if(t&&"function"==typeof t){var n=e.data,s=n.transaction_no,a=n.trade_no;t({transaction_no:s,trade_no:a})}return new Promise((function(e,t){i.wxPaymentRequest({appId:r.appId,timeStamp:r.timeStamp,nonceStr:r.nonceStr,package:r.package,signType:"MD5",paySign:r.paySign,success:function(t){return t.transaction_no=r.transaction_no,t.trade_no=r.trade_no,e(t)},complete:function(e){"requestPayment:fail cancel"==e.errMsg&&t(new o(607))},fail:function(e){"requestPayment:fail cancel"==e.errMsg?t(new o(607)):t(new o(608,e.errMsg))}})}))}))}},function(e,t,r){var n=r(0);e.exports=function(e){return(new n.Order).get(e.transactionID)}},function(e,t,r){var n=r(0),o=r(3),i=r(1),s=r(2),a=function(e){wx.getNetworkType({success:function(t){"none"===t.networkType?e(new o(600)):e(new o(601))}})};e.exports=function(e){var t=e.url,r=e.method,u=void 0===r?"GET":r,c=e.data,l=void 0===c?{}:c,f=e.header,_=void 0===f?{}:f,p=e.dataType,h=void 0===p?"json":p;return i.mergeRequestHeader(_).then((function(e){return new Promise((function(r,c){if(!n._config.CLIENT_ID)return c(new o(602));if(!/https?:\/\//.test(t)){var f=n._polyfill.getAPIHost();t=f.replace(/\/$/,"")+"/"+t.replace(/^\//,"")}wx.request({method:u,url:t,data:l,header:e,dataType:h,success:r,fail:function(e){i.log(s.LOG_LEVEL.ERROR,e),a(c)}}),i.log(s.LOG_LEVEL.INFO,"Request => "+t)}))}))},e.exports.wxRequestFail=a},function(e,t,r){var n=r(1),o=r(0),i=r(2),s=r(18);e.exports=function(e){var t=e.url,r=e.method,a=void 0===r?"GET":r,u=e.data,c=void 0===u?{}:u,l=e.header,f=void 0===l?{}:l,_=e.dataType,p=void 0===_?"json":_;return(o._config.AUTO_LOGIN?o.auth.silentLogin():Promise.resolve()).then((function(){return o.request.call(null,{url:t,method:a,data:c,header:f,dataType:p})})).then((function(e){return e.statusCode===i.STATUS_CODE.UNAUTHORIZED&&o._config.AUTO_LOGIN?(r={header:f,method:a,url:t,data:c,dataType:p},u=s.get(i.STORAGE_KEY.UID),l=Promise.resolve(),s.get(i.STORAGE_KEY.AUTH_TOKEN)&&(l=o.clearSession()),l.then((function(){return o.auth.silentLogin().then((function(){return n.getResendPayload(o,r,u)})).then((function(e){return o.request(e).then(n.validateStatusCode)}))}))):n.validateStatusCode(e);var r,u,l}))}},function(e,t,r){function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=r(0),s=r(2),a=r(3),u=r(1),c=r(53),l=c.getUploadFileConfig,f=c.getUploadHeaders;e.exports=function(e,t,r){if(!e||"object"!==o(e)||!e.filePath)throw new a(605);if(void 0!==e.fileName&&"string"!=typeof e.fileName)throw new a(605);if(t){if("object"!==o(t))throw new a(605)}else t={};var c,_,p,h,d=null,y=new Promise((function(e,t){c=e,_=t})),v=function(e){return d?d.onProgressUpdate(e):p=e,this},g=function(){return d&&d.abort(),h=!0,this};!function e(t){return n(t,{catch:function(){for(var t,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];var i=(t=Promise.prototype.catch).call.apply(t,[this].concat(n));return e(i),i},then:function(){for(var t,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];var i=(t=Promise.prototype.then).call.apply(t,[this].concat(n));return e(i),i},abort:g,onProgressUpdate:v})}(y);var b=e.fileName||u.getFileNameFromPath(e.filePath);return l(b,u.replaceQueryParams(t)).then((function(t){if(h)return _(new Error("aborted"));var n={id:t.data.id,fileName:b,policy:t.data.policy,authorization:t.data.authorization,uploadUrl:t.data.upload_url,filePath:e.filePath,destLink:t.data.path};d=f().then((function(e){var t=function(e,t,r,n,o){return wx.uploadFile({url:t.uploadUrl,filePath:t.filePath,name:s.UPLOAD.UPLOAD_FILE_KEY,formData:{authorization:t.authorization,policy:t.policy},header:e,success:function(e){var i={},s=JSON.parse(e.data);i.status="ok",i.path=t.destLink,i.file={id:t.id,path:t.destLink,name:t.fileName,created_at:s.time,mime_type:s.mimetype,cdn_path:s.url,size:s.file_size},delete e.data,e.data=o&&"json"===o?i:JSON.stringify(i);try{r(u.validateStatusCode(e))}catch(e){n(e)}},fail:function(){i.request.wxRequestFail(n)}})}(e,n,(function(e){if(h)return _(new Error("aborted"));c(e)}),_,r);return p&&t.onProgressUpdate(p),t}))}),_),y}},function(e,t,r){function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var o=r(0),i=r(3),s=r(1),a=o._config.API;e.exports=function(e,t,r,u){var c=function(e,t,r,n){var o={},a=["wxacode","wxacodeunlimit","wxaqrcode"].indexOf(e);if(!s.isString(e)||-1===a)throw new i(605,'type ‰∏∫Â≠óÁ¨¶‰∏≤Á±ªÂûã‰∏îÂè™Êé•Âèó "wxacode", "wxacodeunlimit", "wxaqrcode" ÂÖ∂‰∏≠‰∏ÄÁßç');if(o.code_type=["miniapp_permanent","miniapp_temporary","miniapp_qr"][a],!t||t.constructor!==Object)throw new i(605,"params ‰∏∫ Object Á±ªÂûã");if("wxacode"===e||"wxaqrcode"===e){if(!t.hasOwnProperty("path"))throw new i(605,'ÂΩì type ‰∏∫ "wxacode" Êàñ "wxaqrcode" Êó∂Ôºåparams ‰∏≠ÂøÖÈ°ªÂ∏¶Êúâ "path" Â±ûÊÄß');o.path=t.path}if("wxacodeunlimit"===e){if(!t.hasOwnProperty("scene"))throw new i(605,'ÂΩì type ‰∏∫ "wxacodeunlimit" Êó∂Ôºåparams ‰∏≠ÂøÖÈ°ªÂ∏¶Êúâ "scene" Â±ûÊÄß');o.scene=t.scene,t.hasOwnProperty("page")&&(o.path=t.page)}return o.options={},t.hasOwnProperty("width")&&(o.options.width=t.width),t.hasOwnProperty("auto_color")&&(o.options.auto_color=t.auto_color),t.hasOwnProperty("line_color")&&(o.options.line_color=t.line_color),t.hasOwnProperty("is_hyaline")&&(o.options.is_hyaline=t.is_hyaline),!0===r&&(o.upload_to_cdn=!0,n&&(o.category_name=n)),o}(e,t,r,u);return o._baasRequest({url:a.WECHAT.WXACODE,method:"POST",data:c}).then((function(e){return r?n({download_url:e.data.uploaded_file.path},e.data):e.data}))}},function(e,t,r){function n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){o(e,t,r[t])}))}return e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var i=r(0),s=r(3),a=r(1),u=i._config.API,c=function(e){var t=i._polyfill.getSystemInfoSync().SDKVersion;return a.compareBaseLibraryVersion(t,e)>=0},l=function(e){var t=c("2.21.2");if(!(e instanceof Array)||e.length<3||t&&"phone-number"===e[2]&&e.length<4)return!1;return["we-run-data","open-gid","phone-number"].includes(e[2])};e.exports=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(!l(t))throw new s(605);var o=t[0],a=t[1],f=t[2],_=t[3],p=c("2.21.2"),h=n({encryptedData:o,iv:a},p?{phone_code:_}:{}),d=p?u.WECHAT.DECRYPT:u.WECHAT.DECRYPT_OLD;return i._baasRequest({url:d+f+"/",method:"POST",data:h}).then((function(e){return e.data}),(function(e){if(403===e.code)throw new s(403,"ÂæÆ‰ø°Ëß£ÂØÜÊèí‰ª∂Êú™ÂºÄÂêØ");throw e}))}},function(e,t,r){var n=r(0),o=r(1),i=n._config.API;e.exports=o.ticketReportThrottle((function(e){var t=o.makeReportTicketParam(e);return n._baasRequest({url:i.WECHAT.TEMPLATE_MESSAGE,method:"POST",data:t})}))},function(e,t,r){var n=r(0),o=r(3),i=n._config,s=n._polyfill,a=r(144),u=!1;e.exports={enable:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).usePlugins,t=void 0!==e&&e;if(!n._config||!n._config.CLIENT_ID)throw new o(602);return a.usePlugins="plugin"===s.SDK_TYPE||t,u=!0,a.init(!0,{clientId:n._config.CLIENT_ID},i.VERSION)},track:function(){if(!u)throw new o(610);return a.track.apply(a,arguments)},metaData:function(){if(!u)throw new o(610);return a.metaData.apply(a,arguments)}}},function(e,t,r){(function(n){var o,i;function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(n,s){"object"==a(t)&&void 0!==e?e.exports=s():void 0===(i="function"==typeof(o=s)?o.call(t,r,t,e):o)||(e.exports=i)}(0,(function(){var e={url:{sdkDown:"https://dataapi.testin.cn/sdkDown",track:"https://dataapi.testin.cn/sendEvents"},sdkDown:{pid:"",pl:"miniPrograms",sv:"1.1.1",testin_id:"",testin_time:0,testin_type:"track",testin_name:"testin_bug",testin_first:!0,di:{testin_schan:["testin_schan_bugout"],testin_av:"",testin_wechat_ver:"",testin_tm:0,testin_pa:"",testin_brand:"",testin_model:"",testin_os:"",testin_ov:"",testin_dh:0,testin_dw:0,testin_lan:"",testin_net:"",testin_bug_type:1,testin_bug_lan:4,testin_component_ver:"",testin_bug_bn:"",testin_bug_pr:"",testin_bug_ww:0,testin_bug_wh:0,testin_bug_sbh:"",testin_bug_fss:"",testin_bus:2}},record:{testin_pid:"",testin_id:"",testin_pl:"miniPrograms",testin_time:0,testin_type:"track",testin_name:"testin_bug",testin_sv:"1.1.1",attrs:{testin_av:"",testin_wechat_ver:"",testin_tm:0,testin_pa:"",testin_brand:"",testin_model:"",testin_os:"",testin_ov:"",testin_dh:0,testin_dw:0,testin_lan:"",testin_url:"",testin_net:"",testin_bug_type:1,testin_bug_lan:4,testin_component_ver:"",testin_bug_bn:"",testin_bug_stack:"",testin_bug_sv:"1.1.1",testin_bug_pr:"0",testin_bug_ww:0,testin_bug_wh:0,testin_bug_sbh:"",testin_bug_fss:"",testin_bug_rea:"",testin_bug_slog:"",testin_bug_name:"",testin_bus:2}},breadcrumb:[],sdkInitComplete:!1},t={uuid:function(){var e,t;!function(){if(!e){var r=new Array(16);t=e=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),r[t]=e>>>((3&t)<<3)&255;return r}}}();for(var r="function"==typeof n?n:Array,o=[],i={},s=0;s<256;s++)o[s]=(s+256).toString(16).substr(1),i[o[s]]=s;function a(e,t){var r=t||0,n=o;return n[e[r++]]+n[e[r++]]+n[e[r++]]+n[e[r++]]+"-"+n[e[r++]]+n[e[r++]]+"-"+n[e[r++]]+n[e[r++]]+"-"+n[e[r++]]+n[e[r++]]+"-"+n[e[r++]]+n[e[r++]]+n[e[r++]]+n[e[r++]]+n[e[r++]]+n[e[r++]]}function u(t,n,o){var i=n&&o||0;"string"==typeof t&&(n="binary"===t?new r(16):null,t=null);var s=(t=t||{}).random||(t.rng||e)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,n)for(var u=0;u<16;u++)n[i+u]=s[u];return n||a(s)}var c=u;return c.v4=u,c.parse=function(e,t,r){var n=t&&r||0,o=0;for(t=t||[],e.toLowerCase().replace(/[0-9a-f]{2}/g,(function(e){o<16&&(t[n+o++]=i[e])}));o<16;)t[n+o++]=0;return t},c.unparse=a,c.BufferClass=r,c._rng=e,c._mathRNG=t,c._nodeRNG=void 0,c._whatwgRNG=void 0,c()},getCurrentPageUrl:function(){var e=getCurrentPages();if(e.length)return e[e.length-1]},getAesKey:function(){var e,t="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",r=t.length,n="";for(e=0;e<16;e++)n+=t.charAt(Math.floor(Math.random()*r));return n},reWriteApp:function(t){var r=App,n=this;App=function(o){return["onLaunch","onShow","onHide","onError"].forEach((function(r){var i=o[r];o[r]=function(o){"onLaunch"===r&&(e.sdkDown.di.testin_chan=e.record.attrs.testin_chan=o.scene);var s={};"onError"===r?(s.testin_bug_s_time=n.nowTime(),s.testin_bug_s_tit="‚¨Ü‚¨Ü‚¨Ü‚¨Ü‚¨ÜBUGÂú®Ê≠§‚¨Ü‚¨Ü‚¨Ü‚¨Ü‚¨Ü",s.testin_bug_s_con="App: "+r):(s.testin_bug_s_time=n.nowTime(),s.testin_bug_s_tit=o&&o.path||"",s.testin_bug_s_con="App: "+r),n.pushToBreadcrumb(s),"onError"===r&&t.track(o),i&&i.call(this,o)}})),r(o)}},reWritePage:function(){var e=this,t=Page;Page=function(r){return Object.keys(r).forEach((function(t){"function"==typeof r[t]&&e.recordPageFn(r,t)})),r.onReady||e.recordPageFn(r,"onReady"),r.onLoad||e.recordPageFn(r,"onLoad"),t(r)}},reWriteWxRequest:function(){var t=this,r=wx.request;try{Object.defineProperty(wx,"request",{configurable:!0,enumerable:!0,writable:!0,value:function(){var n=arguments[0]||{},o=t.nowTime();return n.url.indexOf(e.url.sdkDown)>-1||n.url.indexOf(e.url.track)>-1?r.apply(wx,arguments):(n.complete?t.reWriteComplete(n,o):n.complete=function(e){t.pushToBreadcrumb({testin_bug_s_time:t.nowTime(),testin_bug_s_tit:n.url,testin_bug_s_con:n.method+", status: "+e.statusCode})},r.apply(wx,arguments))}})}catch(e){console.log(e,"Ê≠§ÂÜÖÂÆπ‰∏∫bugoutÊâÄÊúâ~~")}},reWriteComplete:function(e,t){var r=this,n=e.complete;e.complete=function(t){return r.pushToBreadcrumb({testin_bug_s_time:r.nowTime(),testin_bug_s_tit:e.url,testin_bug_s_con:e.method+", status: "+t.statusCode}),n(t)}},reWriteConsole:function(){var e={log:"L",info:"I",error:"E",warn:"W",debug:"D"},t=this;this.consoleList=[],["debug","error","info","log","warn"].forEach((function(r){var n;n=console[r],console[r]=function(o){t.consoleList.push(t.nowTimeTrans()+" "+e[r]+"/console(0): "+o),t.consoleList.length>100&&t.consoleList.shift(),n.apply(console,arguments)}}))},recordPageFn:function(e,t){var r=e[t],n=this;e[t]=function(){"onLoad"!==t&&"onShow"!==t||(n.activePage=n.getCurrentPageUrl());var e={testin_bug_s_time:n.nowTime(),testin_bug_s_tit:n.activePage?n.activePage.route:"-",testin_bug_s_con:"Page: "+t};return"onLoad"===t&&(e.args=arguments),n.pushToBreadcrumb(e),r&&r.apply(this,arguments)}},nowTime:function(){return(new Date).getTime()},timeZone:function(){return(new Date).getTimezoneOffset()/60},nowTimeTrans:function(){var e=new Date;return(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"-"+(e.getDate()<10?"0"+e.getDate():e.getDate())+" "+(e.getHours()<10?"0"+e.getHours():e.getHours())+":"+(e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes())+":"+(e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds())+"."+(e.getTime()+"").slice(-3)},pushToBreadcrumb:function(t){e.breadcrumb.push(t),e.breadcrumb.length>100&&e.breadcrumb.shift()},getStorage:function(){var t=this;wx.getStorage({key:"testin_id",success:function(t){e.sdkDown.testin_first=!1,e.sdkDown.testin_id=e.record.testin_eid=e.record.testin_id=t.data},fail:function(){var r=t.uuid();wx.setStorage({key:"testin_id",data:r}),e.sdkDown.testin_first=!0,e.sdkDown.testin_id=e.record.testin_eid=e.record.testin_id=r}})}},r="function"==typeof Symbol&&"symbol"==a(Symbol.iterator)?function(e){return a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":a(e)};return{init:function(n,o,i){var s=void 0,a=this;function u(r,o){if(t.reWriteConsole(),r.usePlugins||(t.reWriteWxRequest(),t.reWritePage(),t.reWriteApp(a)),"boolean"==typeof n){if(e.sdkDown.di.testin_zone=e.record.attrs.testin_zone=t.timeZone(),e.sdkDown.di.testin_av=e.record.attrs.testin_av=i,t.bugOutPower=n,wx.getAccountInfoSync){var s=wx.getAccountInfoSync();e.sdkDown.di.testin_pa=e.record.attrs.testin_pa=s.miniProgram.appId}e.sdkDown.pid=e.record.testin_pid=o,e.sdkDown.testin_time=t.nowTime(),t.getStorage(),wx.getSystemInfo({success:function(t){var r=t.system.split(" ");e.record.attrs.testin_wechat_ver=e.sdkDown.di.testin_wechat_ver=t.version,e.record.attrs.testin_brand=e.sdkDown.di.testin_brand=t.brand,e.record.attrs.testin_model=e.sdkDown.di.testin_model=t.model,e.record.attrs.testin_os=e.sdkDown.di.testin_os=r[0],e.record.attrs.testin_ov=e.sdkDown.di.testin_ov=r[1],e.record.attrs.testin_dh=e.sdkDown.di.testin_dh=t.screenHeight,e.record.attrs.testin_dw=e.sdkDown.di.testin_dw=t.screenWidth,e.record.attrs.testin_lan=e.sdkDown.di.testin_lan=t.language,e.record.attrs.testin_bug_bn=e.sdkDown.di.testin_bug_bn=t.platform,e.record.attrs.testin_component_ver=e.sdkDown.di.testin_component_ver=t.SDKVersion,e.record.attrs.testin_bug_pr=e.sdkDown.di.testin_bug_pr=t.pixelRatio.toFixed(1),e.record.attrs.testin_bug_ww=e.sdkDown.di.testin_bug_ww=t.windowWidth,e.record.attrs.testin_bug_wh=e.sdkDown.di.testin_bug_wh=t.windowHeight,e.record.attrs.testin_bug_sbh=e.sdkDown.di.testin_bug_sbh=t.statusBarHeight,e.record.attrs.testin_bug_fss=e.sdkDown.di.testin_bug_fss=t.fontSizeSetting,t.batteryLevel&&(e.record.attrs.testin_bat_rem=e.sdkDown.di.testin_bat_rem=t.batteryLevel)},complete:function(){wx.getNetworkType({success:function(t){e.record.attrs.testin_net=e.sdkDown.di.testin_net=t.networkType},complete:function(){wx.request({url:e.url.sdkDown,method:"POST",data:e.sdkDown})}})}})}else console.log("ËØ∑ÊåâÁÖßÈõÜÊàêÊñáÊ°£Ê≠£Á°ÆÈõÜÊàêSDK")}"object"===(void 0===o?"undefined":r(o))?wx.request({url:"https://dataapi.testin.cn/api/getappkey/"+o.clientId,header:{"Content-Type":"text/html;charset=UTF-8"},success:function(e){s=e.data?e.data:"noPid",u(a,s)}}):"string"==typeof o&&u(a,s=o)},track:function(n){if(t.bugOutPower){"string"==typeof n&&(e.record.attrs.testin_bug_rea=n.split("\n")[1],e.record.attrs.testin_bug_name=n.split("\n")[0],e.record.attrs.testin_bug_stack=n),"object"===(void 0===n?"undefined":r(n))&&(e.record.attrs.testin_bug_rea=n.message,e.record.attrs.testin_bug_name=n.name,e.record.attrs.testin_bug_stack=n.stack),e.record.attrs.testin_bug_slog=t.consoleList.join("\n"),e.record.attrs.testin_url=t.getCurrentPageUrl()?t.getCurrentPageUrl().route:"",e.record.testin_time=t.nowTime(),e.record.attrs.testin_bug_steps=JSON.stringify(e.breadcrumb);var o=[];o.push(e.record),wx.request({url:e.url.track,method:"POST",data:o})}},usePlugins:!1,metaData:function(t){return e.record.attrs.testin_bug_user=JSON.stringify(s({},t))}}}))}).call(this,r(145).Buffer)},function(e,t,r){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var n=r(146),o=r(147),i=r(148);function s(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(e,t){if(s()<t)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=u.prototype:(null===e&&(e=new u(t)),e.length=t),e}function u(e,t,r){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return f(this,e)}return c(this,e,t,r)}function c(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n);u.TYPED_ARRAY_SUPPORT?(e=t).__proto__=u.prototype:e=_(e,t);return e}(e,t,r,n):"string"==typeof t?function(e,t,r){"string"==typeof r&&""!==r||(r="utf8");if(!u.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|h(t,r),o=(e=a(e,n)).write(t,r);o!==n&&(e=e.slice(0,o));return e}(e,t,r):function(e,t){if(u.isBuffer(t)){var r=0|p(t.length);return 0===(e=a(e,r)).length?e:(t.copy(e,0,0,r),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(n=t.length)!=n?a(e,0):_(e,t);if("Buffer"===t.type&&i(t.data))return _(e,t.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function f(e,t){if(l(t),e=a(e,t<0?0:0|p(t)),!u.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function _(e,t){var r=t.length<0?0:0|p(t.length);e=a(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function p(e){if(e>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|e}function h(e,t){if(u.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return B(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return H(e).length;default:if(n)return B(e).length;t=(""+t).toLowerCase(),n=!0}}function d(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return D(this,t,r);case"utf8":case"utf-8":return A(this,t,r);case"ascii":return I(this,t,r);case"latin1":case"binary":return P(this,t,r);case"base64":return T(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function y(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function v(e,t,r,n,o){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=o?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(o)return-1;r=e.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof t&&(t=u.from(t,n)),u.isBuffer(t))return 0===t.length?-1:g(e,t,r,n,o);if("number"==typeof t)return t&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):g(e,[t],r,n,o);throw new TypeError("val must be string, number or Buffer")}function g(e,t,r,n,o){var i,s=1,a=e.length,u=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;s=2,a/=2,u/=2,r/=2}function c(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(o){var l=-1;for(i=r;i<a;i++)if(c(e,i)===c(t,-1===l?0:i-l)){if(-1===l&&(l=i),i-l+1===u)return l*s}else-1!==l&&(i-=i-l),l=-1}else for(r+u>a&&(r=a-u),i=r;i>=0;i--){for(var f=!0,_=0;_<u;_++)if(c(e,i+_)!==c(t,_)){f=!1;break}if(f)return i}return-1}function b(e,t,r,n){r=Number(r)||0;var o=e.length-r;n?(n=Number(n))>o&&(n=o):n=o;var i=t.length;if(i%2!=0)throw new TypeError("Invalid hex string");n>i/2&&(n=i/2);for(var s=0;s<n;++s){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))return s;e[r+s]=a}return s}function E(e,t,r,n){return Y(B(t,e.length-r),e,r,n)}function m(e,t,r,n){return Y(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function w(e,t,r,n){return m(e,t,r,n)}function O(e,t,r,n){return Y(H(t),e,r,n)}function S(e,t,r,n){return Y(function(e,t){for(var r,n,o,i=[],s=0;s<e.length&&!((t-=2)<0);++s)r=e.charCodeAt(s),n=r>>8,o=r%256,i.push(o),i.push(n);return i}(t,e.length-r),e,r,n)}function T(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function A(e,t,r){r=Math.min(e.length,r);for(var n=[],o=t;o<r;){var i,s,a,u,c=e[o],l=null,f=c>239?4:c>223?3:c>191?2:1;if(o+f<=r)switch(f){case 1:c<128&&(l=c);break;case 2:128==(192&(i=e[o+1]))&&(u=(31&c)<<6|63&i)>127&&(l=u);break;case 3:i=e[o+1],s=e[o+2],128==(192&i)&&128==(192&s)&&(u=(15&c)<<12|(63&i)<<6|63&s)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:i=e[o+1],s=e[o+2],a=e[o+3],128==(192&i)&&128==(192&s)&&128==(192&a)&&(u=(15&c)<<18|(63&i)<<12|(63&s)<<6|63&a)>65535&&u<1114112&&(l=u)}null===l?(l=65533,f=1):l>65535&&(l-=65536,n.push(l>>>10&1023|55296),l=56320|1023&l),n.push(l),o+=f}return function(e){var t=e.length;if(t<=R)return String.fromCharCode.apply(String,e);var r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=R));return r}(n)}t.Buffer=u,t.SlowBuffer=function(e){+e!=e&&(e=0);return u.alloc(+e)},t.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=s(),u.poolSize=8192,u._augment=function(e){return e.__proto__=u.prototype,e},u.from=function(e,t,r){return c(null,e,t,r)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(e,t,r){return function(e,t,r,n){return l(t),t<=0?a(e,t):void 0!==r?"string"==typeof n?a(e,t).fill(r,n):a(e,t).fill(r):a(e,t)}(null,e,t,r)},u.allocUnsafe=function(e){return f(null,e)},u.allocUnsafeSlow=function(e){return f(null,e)},u.isBuffer=function(e){return!(null==e||!e._isBuffer)},u.compare=function(e,t){if(!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,o=0,i=Math.min(r,n);o<i;++o)if(e[o]!==t[o]){r=e[o],n=t[o];break}return r<n?-1:n<r?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!i(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=u.allocUnsafe(t),o=0;for(r=0;r<e.length;++r){var s=e[r];if(!u.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,o),o+=s.length}return n},u.byteLength=h,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)y(this,t,t+1);return this},u.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)y(this,t,t+3),y(this,t+1,t+2);return this},u.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)y(this,t,t+7),y(this,t+1,t+6),y(this,t+2,t+5),y(this,t+3,t+4);return this},u.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?A(this,0,e):d.apply(this,arguments)},u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},u.prototype.compare=function(e,t,r,n,o){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),t<0||r>e.length||n<0||o>this.length)throw new RangeError("out of range index");if(n>=o&&t>=r)return 0;if(n>=o)return-1;if(t>=r)return 1;if(this===e)return 0;for(var i=(o>>>=0)-(n>>>=0),s=(r>>>=0)-(t>>>=0),a=Math.min(i,s),c=this.slice(n,o),l=e.slice(t,r),f=0;f<a;++f)if(c[f]!==l[f]){i=c[f],s=l[f];break}return i<s?-1:s<i?1:0},u.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},u.prototype.indexOf=function(e,t,r){return v(this,e,t,r,!0)},u.prototype.lastIndexOf=function(e,t,r){return v(this,e,t,r,!1)},u.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var o=this.length-t;if((void 0===r||r>o)&&(r=o),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var i=!1;;)switch(n){case"hex":return b(this,e,t,r);case"utf8":case"utf-8":return E(this,e,t,r);case"ascii":return m(this,e,t,r);case"latin1":case"binary":return w(this,e,t,r);case"base64":return O(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,t,r);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var R=4096;function I(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(127&e[o]);return n}function P(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(e[o]);return n}function D(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var o="",i=t;i<r;++i)o+=q(e[i]);return o}function L(e,t,r){for(var n=e.slice(t,r),o="",i=0;i<n.length;i+=2)o+=String.fromCharCode(n[i]+256*n[i+1]);return o}function C(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function k(e,t,r,n,o,i){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<i)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function U(e,t,r,n){t<0&&(t=65535+t+1);for(var o=0,i=Math.min(e.length-r,2);o<i;++o)e[r+o]=(t&255<<8*(n?o:1-o))>>>8*(n?o:1-o)}function N(e,t,r,n){t<0&&(t=4294967295+t+1);for(var o=0,i=Math.min(e.length-r,4);o<i;++o)e[r+o]=t>>>8*(n?o:3-o)&255}function j(e,t,r,n,o,i){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function x(e,t,r,n,i){return i||j(e,0,r,4),o.write(e,t,r,n,23,4),r+4}function M(e,t,r,n,i){return i||j(e,0,r,8),o.write(e,t,r,n,52,8),r+8}u.prototype.slice=function(e,t){var r,n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e),u.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=u.prototype;else{var o=t-e;r=new u(o,void 0);for(var i=0;i<o;++i)r[i]=this[i+e]}return r},u.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||C(e,t,this.length);for(var n=this[e],o=1,i=0;++i<t&&(o*=256);)n+=this[e+i]*o;return n},u.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||C(e,t,this.length);for(var n=this[e+--t],o=1;t>0&&(o*=256);)n+=this[e+--t]*o;return n},u.prototype.readUInt8=function(e,t){return t||C(e,1,this.length),this[e]},u.prototype.readUInt16LE=function(e,t){return t||C(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUInt16BE=function(e,t){return t||C(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUInt32LE=function(e,t){return t||C(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUInt32BE=function(e,t){return t||C(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||C(e,t,this.length);for(var n=this[e],o=1,i=0;++i<t&&(o*=256);)n+=this[e+i]*o;return n>=(o*=128)&&(n-=Math.pow(2,8*t)),n},u.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||C(e,t,this.length);for(var n=t,o=1,i=this[e+--n];n>0&&(o*=256);)i+=this[e+--n]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*t)),i},u.prototype.readInt8=function(e,t){return t||C(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){t||C(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt16BE=function(e,t){t||C(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt32LE=function(e,t){return t||C(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return t||C(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readFloatLE=function(e,t){return t||C(e,4,this.length),o.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return t||C(e,4,this.length),o.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return t||C(e,8,this.length),o.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return t||C(e,8,this.length),o.read(this,e,!1,52,8)},u.prototype.writeUIntLE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||k(this,e,t,r,Math.pow(2,8*r)-1,0);var o=1,i=0;for(this[t]=255&e;++i<r&&(o*=256);)this[t+i]=e/o&255;return t+r},u.prototype.writeUIntBE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||k(this,e,t,r,Math.pow(2,8*r)-1,0);var o=r-1,i=1;for(this[t+o]=255&e;--o>=0&&(i*=256);)this[t+o]=e/i&255;return t+r},u.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||k(this,e,t,1,255,0),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},u.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||k(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):U(this,e,t,!0),t+2},u.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||k(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):U(this,e,t,!1),t+2},u.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||k(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):N(this,e,t,!0),t+4},u.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||k(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):N(this,e,t,!1),t+4},u.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var o=Math.pow(2,8*r-1);k(this,e,t,r,o-1,-o)}var i=0,s=1,a=0;for(this[t]=255&e;++i<r&&(s*=256);)e<0&&0===a&&0!==this[t+i-1]&&(a=1),this[t+i]=(e/s>>0)-a&255;return t+r},u.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var o=Math.pow(2,8*r-1);k(this,e,t,r,o-1,-o)}var i=r-1,s=1,a=0;for(this[t+i]=255&e;--i>=0&&(s*=256);)e<0&&0===a&&0!==this[t+i+1]&&(a=1),this[t+i]=(e/s>>0)-a&255;return t+r},u.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||k(this,e,t,1,127,-128),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||k(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):U(this,e,t,!0),t+2},u.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||k(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):U(this,e,t,!1),t+2},u.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||k(this,e,t,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):N(this,e,t,!0),t+4},u.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||k(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):N(this,e,t,!1),t+4},u.prototype.writeFloatLE=function(e,t,r){return x(this,e,t,!0,r)},u.prototype.writeFloatBE=function(e,t,r){return x(this,e,t,!1,r)},u.prototype.writeDoubleLE=function(e,t,r){return M(this,e,t,!0,r)},u.prototype.writeDoubleBE=function(e,t,r){return M(this,e,t,!1,r)},u.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var o,i=n-r;if(this===e&&r<t&&t<n)for(o=i-1;o>=0;--o)e[o+t]=this[o+r];else if(i<1e3||!u.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)e[o+t]=this[o+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+i),t);return i},u.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var o=e.charCodeAt(0);o<256&&(e=o)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var i;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{var s=u.isBuffer(e)?e:B(new u(e,n).toString()),a=s.length;for(i=0;i<r-t;++i)this[i+t]=s[i%a]}return this};var G=/[^+\/0-9A-Za-z-_]/g;function q(e){return e<16?"0"+e.toString(16):e.toString(16)}function B(e,t){var r;t=t||1/0;for(var n=e.length,o=null,i=[],s=0;s<n;++s){if((r=e.charCodeAt(s))>55295&&r<57344){if(!o){if(r>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(s+1===n){(t-=3)>-1&&i.push(239,191,189);continue}o=r;continue}if(r<56320){(t-=3)>-1&&i.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,r<128){if((t-=1)<0)break;i.push(r)}else if(r<2048){if((t-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function H(e){return n.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(G,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function Y(e,t,r,n){for(var o=0;o<n&&!(o+r>=t.length||o>=e.length);++o)t[o+r]=e[o];return o}}).call(this,r(15))},function(e,t,r){"use strict";t.byteLength=function(e){var t=c(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){var t,r,n=c(e),s=n[0],a=n[1],u=new i(function(e,t,r){return 3*(t+r)/4-r}(0,s,a)),l=0,f=a>0?s-4:s;for(r=0;r<f;r+=4)t=o[e.charCodeAt(r)]<<18|o[e.charCodeAt(r+1)]<<12|o[e.charCodeAt(r+2)]<<6|o[e.charCodeAt(r+3)],u[l++]=t>>16&255,u[l++]=t>>8&255,u[l++]=255&t;2===a&&(t=o[e.charCodeAt(r)]<<2|o[e.charCodeAt(r+1)]>>4,u[l++]=255&t);1===a&&(t=o[e.charCodeAt(r)]<<10|o[e.charCodeAt(r+1)]<<4|o[e.charCodeAt(r+2)]>>2,u[l++]=t>>8&255,u[l++]=255&t);return u},t.fromByteArray=function(e){for(var t,r=e.length,o=r%3,i=[],s=0,a=r-o;s<a;s+=16383)i.push(l(e,s,s+16383>a?a:s+16383));1===o?(t=e[r-1],i.push(n[t>>2]+n[t<<4&63]+"==")):2===o&&(t=(e[r-2]<<8)+e[r-1],i.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"="));return i.join("")};for(var n=[],o=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,u=s.length;a<u;++a)n[a]=s[a],o[s.charCodeAt(a)]=a;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function l(e,t,r){for(var o,i,s=[],a=t;a<r;a+=3)o=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),s.push(n[(i=o)>>18&63]+n[i>>12&63]+n[i>>6&63]+n[63&i]);return s.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,r,n,o){var i,s,a=8*o-n-1,u=(1<<a)-1,c=u>>1,l=-7,f=r?o-1:0,_=r?-1:1,p=e[t+f];for(f+=_,i=p&(1<<-l)-1,p>>=-l,l+=a;l>0;i=256*i+e[t+f],f+=_,l-=8);for(s=i&(1<<-l)-1,i>>=-l,l+=n;l>0;s=256*s+e[t+f],f+=_,l-=8);if(0===i)i=1-c;else{if(i===u)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,n),i-=c}return(p?-1:1)*s*Math.pow(2,i-n)},t.write=function(e,t,r,n,o,i){var s,a,u,c=8*i-o-1,l=(1<<c)-1,f=l>>1,_=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:i-1,h=n?1:-1,d=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-s))<1&&(s--,u*=2),(t+=s+f>=1?_/u:_*Math.pow(2,1-f))*u>=2&&(s++,u/=2),s+f>=l?(a=0,s=l):s+f>=1?(a=(t*u-1)*Math.pow(2,o),s+=f):(a=t*Math.pow(2,f-1)*Math.pow(2,o),s=0));o>=8;e[r+p]=255&a,p+=h,a/=256,o-=8);for(s=s<<o|a,c+=o;c>0;e[r+p]=255&s,p+=h,s/=256,c-=8);e[r+p-h]|=128*d}},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=r(0),i=r(3),s=o._config.API,a=function(e){if("object"!==n(e))return!1;if(void 0===e.scene)return!1;return[0,1].includes(parseInt(e.scene))};e.exports=function(e){if(!a(e))throw new i(605);var t={scene:e.scene,mobile_no:e.mobileNo,email_address:e.emailAddress,extended_info:e.extendedInfo};return o._baasRequest({url:s.WECHAT.USER_RISK_RANK,method:"POST",data:t})}},function(e,t,r){var n=r(0),o=n._config.API;e.exports=function(){return n._baasRequest({url:o.WECHAT.PRIVATE_MESSAGE,method:"POST"})}}])}));
//# sourceMappingURL=sdk-wechat.3.22.0.js.map