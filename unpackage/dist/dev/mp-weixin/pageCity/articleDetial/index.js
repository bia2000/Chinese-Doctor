(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pageCity/articleDetial/index"],{256:function(e,t,n){"use strict";(function(e,t){var o=n(4);n(26);o(n(25));var r=o(n(257));e.__webpack_require_UNI_MP_PLUGIN__=n,t(r.default)}).call(this,n(1)["default"],n(2)["createPage"])},257:function(e,t,n){"use strict";n.r(t);var o=n(258),r=n(260);for(var i in r)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return r[e]}))}(i);n(262);var s,c=n(32),u=Object(c["default"])(r["default"],o["render"],o["staticRenderFns"],!1,null,"4dff645a",null,!1,o["components"],s);u.options.__file="pageCity/articleDetial/index.vue",t["default"]=u.exports},258:function(e,t,n){"use strict";n.r(t);var o=n(259);n.d(t,"render",(function(){return o["render"]})),n.d(t,"staticRenderFns",(function(){return o["staticRenderFns"]})),n.d(t,"recyclableRender",(function(){return o["recyclableRender"]})),n.d(t,"components",(function(){return o["components"]}))},259:function(e,t,n){"use strict";var o;n.r(t),n.d(t,"render",(function(){return r})),n.d(t,"staticRenderFns",(function(){return s})),n.d(t,"recyclableRender",(function(){return i})),n.d(t,"components",(function(){return o}));try{o={uIcon:function(){return Promise.all([n.e("common/vendor"),n.e("node-modules/uview-ui/components/u-icon/u-icon")]).then(n.bind(null,471))}}}catch(c){if(-1===c.message.indexOf("Cannot find module")||-1===c.message.indexOf(".vue"))throw c;console.error(c.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var r=function(){var e=this,t=e.$createElement,n=(e._self._c,e.getTime(e.news.created_at));e.$mp.data=Object.assign({},{$root:{m0:n}})},i=!1,s=[];r._withStripped=!0},260:function(e,t,n){"use strict";n.r(t);var o=n(261),r=n.n(o);for(var i in o)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=r.a},261:function(e,t,n){"use strict";(function(e){var o=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(55)),i=o(n(57)),s=n(163),c=n(162),u={data:function(){return{news:{},commentText:"",userInfo:{},userId:"",type:"",message:{},commentList:[]}},computed:{},methods:{getTime:function(e){return(0,c.TimestampToDate)(1e3*e)},toCollect:function(){if(null==this.news.isCollected?(this.news.isCollected="1",(0,s.updateUserAction)("count_collect",1),(0,s.getPoints)("iscollect",2)):this.news.isCollected=null,console.log(this.news),1==this.type){var e=s.news.getWithoutData(this.news.id);e.set("isCollected",this.news.isCollected),e.update()}else{var t=s.chat_circle.getWithoutData(this.news.id);t.set("isCollected",this.news.isCollected),t.update()}},toComment:function(){var t=this,n=s.user_comment.create();(0,s.updateUserAction)("count_comment",1),(0,s.getPoints)("isComment",2),n.set({userid:this.userId,textId:this.news.id,name:this.userInfo.name,content:this.commentText}),n.save(),this.commentText="",e.showToast({title:"发送成功",success:function(n){e.redirectTo({url:"/pageCity/articleDetial/index?id="+t.message.id+"&type="+t.message.type})}})}},onShow:function(){var t=this;return(0,i.default)(r.default.mark((function n(){var o;return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return(0,s.updateUserAction)("count_resource",1),n.next=3,e.getStorageSync("id");case 3:t.userId=n.sent,o=(0,s.getUserInfo)(t.userId),o.then((function(e){t.userInfo=e}));case 6:case"end":return n.stop()}}),n)})))()},onLoad:function(e){var t=this;this.message=e,this.type=e.type;var n=e.id;s.query.queryObject.$and=[],s.query.contains("textId",n),s.user_comment.setQuery(s.query).find().then((function(e){t.commentList=e.data.objects})),1==e.type?s.news.get(n).then((function(e){t.news=e.data})):s.chat_circle.get(n).then((function(e){t.news=e.data}))}};t.default=u}).call(this,n(2)["default"])},262:function(e,t,n){"use strict";n.r(t);var o=n(263),r=n.n(o);for(var i in o)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=r.a},263:function(e,t,n){}},[[256,"common/runtime","common/vendor"]]]);